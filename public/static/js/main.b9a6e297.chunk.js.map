{"version":3,"sources":["utils/storageUtils.js","redux/actionTypes.js","redux/reducer.js","redux/store.js","api/ajax.js","api/index.js","utils/formatDateUtils.js","config/manuConfig.js","components/linkButton/index.jsx","redux/actions.js","components/header/index.jsx","assets/images/logo.png","components/left-nav/index.jsx","pages/category/AddForm.jsx","pages/category/UpdateForm.jsx","pages/category/Category.jsx","pages/charts/Bar.jsx","pages/charts/Line.jsx","pages/charts/Pie.jsx","pages/home/Home.jsx","utils/constant.js","pages/product/ProductHome.jsx","pages/product/ProductDetails.jsx","pages/product/PicturesWall.jsx","pages/product/RichTextEditor.jsx","pages/product/ProductAddUpdate.jsx","pages/product/Product.jsx","pages/role/AddForm.jsx","pages/role/AuthForm.jsx","pages/role/Role.jsx","pages/user/UserForm.jsx","pages/user/User.jsx","pages/not-found/not-found.jsx","pages/admin/admin.jsx","pages/login/login.jsx","App.js","index.js"],"names":["USER_KEY","storageUtils","saveUser","user","store","set","getUser","get","removeUser","remove","SET_HEAD_TITLE","RECEIVE_USER","SHOW_ERR_MSG","RESET_USER","initUser","combineReducers","headerTitle","state","action","type","data","errMsg","createStore","reducer","composeWithDevTools","applyMiddleware","thunk","ajax","url","Promise","resolve","reject","axios","params","post","then","response","catch","error","message","reqLogin","username","password","BASE","reqCategories","parentId","reqAddCategory","categoryName","reqUpdateCategory","categoryId","reqProducts","pageNum","pageSize","reqSearchProducts","searchName","searchType","reqCategory","reqUpdateStatus","productId","status","reqDeleteImg","name","reqAddOrUpdateProduct","product","_id","reqAddRole","roleName","reqUpdateRole","role","reqUsers","reqDeleteUser","userId","reqAddUpdateUser","reqWeather","city","jsonp","err","results","weather_data","dayPictureUrl","weather","formatDateUtils","time","date","Date","getSeconds","getFullYear","getMonth","getDate","getHours","getMinutes","menuList","title","key","icon","isPublic","children","LinkButton","props","className","setHeadTitle","headTitle","receiveUser","showErrMsg","msg","logout","Header","currentTime","now","getTime","setIntervalId","setInterval","setState","getWeather","a","getTitle","path","location","pathname","forEach","item","cItem","find","indexOf","event","preventDefault","confirm","content","onOk","this","clearInterval","onClick","src","alt","Component","connect","withRouter","SubMenu","LeftNav","shouldShow","menus","getMenuListReduce","reduce","pre","openKey","push","Item","to","menuNodes","logo","selectedKeys","defaultOpenKeys","mode","theme","Option","AddForm","setForm","form","getFieldDecorator","categories","initialValue","value","map","c","rules","required","whitespace","min","max","placeholder","create","UpdateForm","Categories","subCategories","parentName","isLoading","showStatus","initColumns","columns","dataIndex","width","render","category","showUpdateCategoryModal","showSubCategories","getCategories","showSupCategory","result","showAddCategoryModal","handleCancel","resetFields","addCategory","validateFields","updateCategory","style","marginRight","extra","bordered","rowKey","loading","dataSource","pagination","defaultPageSize","showQuickJumper","visible","onCancel","Bar","sales","stores","update","sale","getOption","text","tooltip","legend","xAxis","yAxis","series","option","Line","Pie","subtext","x","trigger","formatter","orient","left","radius","center","itemStyle","emphasis","shadowBlur","shadowOffsetX","shadowColor","getOption2","backgroundColor","top","textStyle","color","visualMap","show","inRange","colorLightness","sort","b","roseType","label","normal","labelLine","lineStyle","smooth","length","length2","animationType","animationEasing","animationDelay","idx","Math","random","height","Home","BASE_IMG_URL","ProductHome","total","products","price","updateStatus","goToProductDetails","history","getProducts","list","onChange","marginLeft","target","current","ProductDetails","firstCategory","secondCategory","goBackProductHome","goBack","getCategory","pCategoryId","all","desc","detail","imgs","fontSize","img","dangerouslySetInnerHTML","__html","getBase64","file","reader","FileReader","readAsDataURL","onload","onerror","PicturesWall","getimgs","fileList","previewVisible","handlePreview","preview","originFileObj","previewImage","handleChange","fileInList","success","index","uid","uploadButton","accept","listType","onPreview","footer","React","RichTextEditor","onEditorStateChange","editorState","getDetail","draftToHtml","convertToRaw","getCurrentContent","uploadImageCallBack","xhr","XMLHttpRequest","open","FormData","append","send","addEventListener","JSON","parse","responseText","link","html","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","EditorState","createWithContent","createEmpty","editorStyle","border","minHeight","paddingLeft","toolbar","image","uploadCallback","present","mandatory","TextArea","ProductAddUpdate","options","validatePrice","rule","callback","loadData","selectedOptions","targetOption","childOptions","isLeaf","initOptions","isUpdate","submit","values","categoryIds","pictureWall","richTextEditor","createRef","labelCol","xs","span","sm","wrapperCol","autoSize","minRows","maxRows","validator","addonAfter","ref","Product","component","exact","TreeNode","AuthForm","getMenu","checkedKeys","getTreeNodes","onCheck","treeNodes","nextProps","nextContext","disabled","checkable","defaultExpandAll","Role","getRoles","roles","onRow","addRole","newRole","showAddStatus","updateRole","showAuthStatus","authName","auth_name","auth_time","role_id","rowSelection","selectedRowKeys","onSelect","UserForm","validatePhoneNumber","test","validatePWD","validateEmail","getUserForm","pattern","phone","email","PureComponent","User","users","addOrUpdateUser","from","getUsers","deleteUser","showUpdateUser","showAddUser","initRolesName","rolesName","NotFound","goHome","replace","Footer","Sider","Content","Admin","Category","textAlign","Login","handleSubmit","e","login","onSubmit","prefix","htmlType","WrappedLogin","dispatch","App","ReactDom","document","getElementById"],"mappings":"kaAEMA,EAAW,WAmBFC,EAjBM,CAEjBC,SAFiB,SAERC,GAELC,IAAMC,IAAIL,EAAUG,IAGxBG,QAPiB,WASb,OAAOF,IAAMG,IAAIP,IAAa,IAGlCQ,WAZiB,WAcbJ,IAAMK,OAAOT,KCdRU,EAAiB,iBACjBC,EAAe,eACfC,EAAe,eACfC,EAAa,aC2B1B,IAAMC,EAAWb,EAAaK,UAuBfS,gCAAgB,CAC3BC,YAlCJ,WAAuD,IAAlCC,EAAiC,uDAD9B,eACsBC,EAAQ,uCAClD,OAAQA,EAAOC,MACX,KAAKT,EACD,OAAOQ,EAAOE,KAClB,QACI,OAAOH,IA8Bfd,KAxBJ,WAAyC,IAA3Bc,EAA0B,uDAAlBH,EAAUI,EAAQ,uCACpC,OAAQA,EAAOC,MACX,KAAKR,EACD,OAAOO,EAAOE,KAClB,KAAKR,EACD,IAAMS,EAASH,EAAOE,KACtB,OAAO,2BAAKH,GAAZ,IAAmBI,WACvB,KAAKR,EAED,OADAZ,EAAaO,aACNU,EAAOE,KAClB,QACI,OAAOH,MC5BJK,wBAAYC,EAASC,8BAAoBC,0BAAgBC,O,uKCKzD,SAASC,EAAKC,GAA+B,IAA1BR,EAAyB,uDAAlB,GAAID,EAAc,uDAAP,MAChD,OAAO,IAAIU,SAAS,SAACC,EAASC,IAGb,QAATZ,EACUa,IAAMzB,IAAIqB,EAAK,CAAEK,OAAQb,IAEzBY,IAAME,KAAKN,EAAKR,IAGtBe,MAAK,SAAAC,GACTN,EAAQM,EAAShB,SAElBiB,OAAM,SAACC,GACNC,EAAA,EAAQD,MAAM,uCAAUA,S,sBCtBvBE,EAAW,SAACC,EAAUC,GAAX,OAAwBf,EAAKgB,SAAiB,CAAEF,WAAUC,YAAY,SAGjFE,EAAgB,SAACC,GAAD,OAAclB,EAAKgB,wBAAgC,CAAEE,cAGrEC,EAAiB,SAACC,EAAcF,GAAf,OAA4BlB,EAAKgB,uBAA+B,CAAEI,eAAcF,YAAY,SAG7GG,EAAoB,SAAC,GAAD,OAAkCrB,EAAKgB,0BAAkC,CAAEM,WAA3E,EAAGA,WAAoFF,aAAvF,EAAeA,cAAwF,SAI3HG,EAAc,SAACC,EAASC,GAAV,OAAuBzB,EAAKgB,uBAA+B,CAAEQ,UAASC,cAIpFC,EAAoB,SAAC,GAAD,IAAGF,EAAH,EAAGA,QAASC,EAAZ,EAAYA,SAAUE,EAAtB,EAAsBA,WAAYC,EAAlC,EAAkCA,WAAlC,OAAmD5B,EAAKgB,yBAAD,aAEhFQ,UACAC,YAECG,EAAaD,KAGTE,EAAc,SAACP,GAAD,OAAgBtB,EAAKgB,wBAAgC,CAAEM,gBAGrEQ,EAAkB,SAACC,EAAWC,GAAZ,OAAuBhC,EAAKgB,+BAAuC,CAAEe,YAAWC,UAAU,SAG5GC,EAAe,SAACC,GAAD,OAAUlC,EAAKgB,qBAA6B,CAAEkB,QAAQ,SAGrEC,EAAwB,SAACC,GAAD,OAAapC,EAAKgB,oBAA6BoB,EAAQC,IAAM,SAAW,OAAQD,EAAS,SAMjHE,EAAa,SAACC,GAAD,OAAcvC,EAAKgB,mBAA2B,CAAEuB,YAAY,SAEzEC,EAAgB,SAACC,GAAD,OAAUzC,EAAKgB,sBAA8ByB,EAAM,SAGnEC,EAAW,kBAAM1C,EAAKgB,oBAA4B,QAGlD2B,GAAgB,SAACC,GAAD,OAAY5C,EAAKgB,sBAA8B,CAAE4B,UAAU,SAG3EC,GAAmB,SAACrE,GAAD,OAAUwB,EAAKgB,iBAA0BxC,EAAK6D,IAAM,SAAW,OAAQ7D,EAAM,SAIhGsE,GAAa,SAACC,GAEvB,OAAO,IAAI7C,SAAS,SAACC,EAASC,GAC1B4C,IAAM,2DAAD,OAA4DD,EAA5D,6CACD,IACA,SAACE,EAAKxD,GACF,GAAKwD,GAAuB,YAAhBxD,EAAKuC,OAKbpB,EAAA,EAAQD,MAAM,4CALqB,CAEnC,MAAmClB,EAAKyD,QAAQ,GAAGC,aAAa,GAAxDC,EAAR,EAAQA,cAAeC,EAAvB,EAAuBA,QACvBlD,EAAQ,CAAEiD,gBAAeC,oBClEtC,SAASC,GAAgBC,GAC5B,IAAKA,EAAM,MAAO,GAClB,IAAMC,EAAO,IAAIC,KAAKF,GAEtB,OAAIC,EAAKE,cAAgB,GACf,GAAN,OAAUF,EAAKG,cAAf,YAAgCH,EAAKI,WAAa,EAAlD,YAAuDJ,EAAKK,UAA5D,YAAyEL,EAAKM,WAA9E,YAA4FN,EAAKO,aAAjG,YAAiHP,EAAKE,cAEtH,UAAUF,EAAKG,cAAf,YAAgCH,EAAKI,WAAa,EAAlD,YAAuDJ,EAAKK,UAA5D,YAAyEL,EAAKM,WAA9E,YAA4FN,EAAKO,aAAjG,aAAkHP,EAAKE,cCpB/H,IAkEeM,GAlEE,CACb,CACIC,MAAO,eACPC,IAAK,QACLC,KAAM,OACNC,UAAU,GAEd,CACIH,MAAO,eACPC,IAAK,YACLC,KAAM,WACNE,SAAU,CACN,CACIJ,MAAO,2BACPC,IAAK,YACLC,KAAM,QAEV,CACIF,MAAO,2BACPC,IAAK,WACLC,KAAM,UAKlB,CACIF,MAAO,2BACPC,IAAK,QACLC,KAAM,QAEV,CACIF,MAAO,2BACPC,IAAK,QACLC,KAAM,UAGV,CACIF,MAAO,2BACPC,IAAK,UACLC,KAAM,aACNE,SAAU,CACN,CACIJ,MAAO,qBACPC,IAAK,cACLC,KAAM,aAEV,CACIF,MAAO,qBACPC,IAAK,eACLC,KAAM,cAEV,CACIF,MAAO,eACPC,IAAK,cACLC,KAAM,eAKlB,CACIF,MAAO,2BACPC,IAAK,SACLC,KAAM,Y,iBC3DC,SAASG,GAAWC,GAC/B,OACI,mDAAYA,GAAZ,IAAmBC,UAAW,iBCqB/B,IAAMC,GAAe,SAACC,GAAD,MAAgB,CAAElF,KAAMT,EAAgBU,KAAMiF,IAG7DC,GAAc,SAACnG,GAAD,MAAW,CAAEgB,KAAMR,EAAcS,KAAMjB,IAGrDoG,GAAa,SAACC,GAAD,MAAU,CAAErF,KAAMP,EAAcQ,KAAMoF,IAmBnDC,GAAS,iBAAO,CAAEtF,KAAMN,EAAYO,KAAM,KCtCjDsF,G,4MACFzF,MAAQ,CAEJ0F,YAAa1B,GAAgBG,KAAKwB,OAElC7B,cAAe,GAEfC,QAAS,I,EAOb6B,QAAU,WACN,EAAKC,cAAgBC,aAAY,WAC7B,IAAMJ,EAAc1B,GAAgBG,KAAKwB,OACzC,EAAKI,SAAS,CAAEL,kBACjB,M,EAEPM,W,sBAAa,gCAAAC,EAAA,sEACgCzC,GAAW,gBAD3C,gBACDM,EADC,EACDA,cAAeC,EADd,EACcA,QACvB,EAAKgC,SAAS,CAAEjC,gBAAeC,YAFtB,2C,EAKbmC,SAAW,WACP,IAAMC,EAAO,EAAKlB,MAAMmB,SAASC,SAC7B1B,EAAQ,GAcZ,OAbAD,GAAS4B,SAAQ,SAAAC,GAEb,GAAIA,EAAK3B,MAAQuB,EACbxB,EAAQ4B,EAAK5B,WACV,GAAI4B,EAAKxB,SAAU,CAEtB,IAAMyB,EAAQD,EAAKxB,SAAS0B,MAAK,SAAAD,GAAK,OAAgC,IAA5BL,EAAKO,QAAQF,EAAM5B,QACzD4B,IAEA7B,EAAQ6B,EAAM7B,WAInBA,G,EAGXa,OAAS,SAACmB,GACNA,EAAMC,iBACN,IAAMC,QAAQ,CACVC,QAAQ,2BAAD,OAAS,EAAK7B,MAAM/F,KAAKsC,SAAzB,gBAEPuF,KAAM,WAEF,EAAK9B,MAAMO,a,uDAzCvB,WACIwB,KAAKpB,UACLoB,KAAKhB,e,kCA6CT,WACIiB,cAAcD,KAAKnB,iB,oBAGvB,WAGI,IAAMrE,EAAWwF,KAAK/B,MAAM/F,KAAKsC,SAEjC,EAAgDwF,KAAKhH,MAA7C0F,EAAR,EAAQA,YAAa5B,EAArB,EAAqBA,cAAeC,EAApC,EAAoCA,QAO9BY,EAAQqC,KAAK/B,MAAMlF,YAEzB,OACI,uBAAKmF,UAAW,SAAhB,UACI,uBAAKA,UAAU,aAAf,UACI,uDAAU1D,KACV,eAACwD,GAAD,CAAYkC,QAASF,KAAKxB,OAA1B,6BAIJ,uBAAKN,UAAU,gBAAf,UACI,sBAAKA,UAAU,qBAAf,SAAqCP,IACrC,uBAAKO,UAAU,sBAAf,UACI,gCAAOQ,IACP,sBAAKyB,IAAKrD,EAAesD,IAAI,YAC7B,gCAAOrD,iB,GAxFVsD,aA+FNC,gBACX,SAAAtH,GAAK,MAAK,CAAED,YAAaC,EAAMD,YAAab,KAAMc,EAAMd,QACxD,CAAEsG,WAFS8B,CAGbC,YAAW9B,K,mCC/GE,I,OAAA,s/NCYP+B,GAAR,KAAQA,QAEFC,G,4MAQFC,WAAa,SAACnB,GAOV,IAAM3B,EAAM2B,EAAK3B,IACjB,EAA2B,EAAKK,MAAM/F,KAA9BiE,EAAR,EAAQA,KAAM3B,EAAd,EAAcA,SACRmG,EAAQxE,EAAKwE,MACnB,QAAiB,UAAbnG,IAAwB+E,EAAKzB,WAAoC,IAAxB6C,EAAMjB,QAAQ9B,OAEhD2B,EAAKxB,YAEHwB,EAAKxB,SAAS0B,MAAK,SAAAD,GAAK,OAAkC,IAA9BmB,EAAMjB,QAAQF,EAAM5B,S,EAMjEgD,kBAAoB,SAAClD,GAEjB,IAAIyB,EAAO,EAAKlB,MAAMmB,SAASC,SAE/B,OAAO3B,EAASmD,QAAO,SAACC,EAAKvB,GAErB,EAAKmB,WAAWnB,KAEXA,EAAKxB,UAgBQwB,EAAKxB,SAAS0B,MAAK,SAAAD,GAAK,OAAgC,IAA5BL,EAAKO,QAAQF,EAAM5B,UAGzD,EAAKmD,QAAUxB,EAAK3B,KAGxBkD,EAAIE,KACA,eAACR,GAAD,CAEI7C,MACI,kCACI,qBAAMzE,KAAMqG,EAAK1B,OACjB,gCAAO0B,EAAK5B,WALxB,SASK,EAAKiD,kBAAkBrB,EAAKxB,WARxBwB,EAAK3B,QAtBd2B,EAAK3B,MAAQuB,GAAmC,IAA3BA,EAAKO,QAAQH,EAAK3B,MAEvC,EAAKK,MAAME,aAAaoB,EAAK5B,OAEjCmD,EAAIE,KACA,oBAAMC,KAAN,CAA0Bf,QAAS,WAAQ,EAAKjC,MAAME,aAAaoB,EAAK5B,QAAxE,SACI,gBAAC,IAAD,CAAMuD,GAAI3B,EAAK3B,IAAf,UACI,qBAAM1E,KAAMqG,EAAK1B,OACjB,gCAAO0B,EAAK5B,YAHJ4B,EAAK3B,QA8BjC,OAAOkD,IACR,K,+DAGP,WACId,KAAKmB,UAAYnB,KAAKY,kBAAkBlD,M,oBAG5C,WACI,IAAIyB,EAAOa,KAAK/B,MAAMmB,SAASC,SAM/B,OAHiC,IAA7BF,EAAKO,QAAQ,cACbP,EAAO,YAGP,uBAAKjB,UAAW,WAAhB,UACI,gBAAC,IAAD,CAAMgD,GAAG,IAAIhD,UAAU,kBAAvB,UACI,sBAAKiC,IAAKiB,GAAMhB,IAAI,KACpB,8DAEJ,qBAGIiB,aAAc,CAAClC,GAEfmC,gBAAiB,CAACtB,KAAKe,SAEvBQ,KAAK,SACLC,MAAM,OARV,SAWQxB,KAAKmB,mB,GAzGPd,aAqHPC,gBACX,SAAAtH,GAAK,MAAK,CAAEd,KAAMc,EAAMd,QACxB,CAAEiG,iBAFSmC,CAGbC,YAAWE,K,wGC/HPQ,GAAO,KAAKA,KACZQ,GAAS,KAAOA,OAGhBC,G,+KAOF,WACI1B,KAAK/B,MAAM0D,QAAQ3B,KAAK/B,MAAM2D,Q,oBAElC,WACI,IAAQC,EAAsB7B,KAAK/B,MAAM2D,KAAjCC,kBACR,EAAiC7B,KAAK/B,MAA9BrD,EAAR,EAAQA,SAAUkH,EAAlB,EAAkBA,WAClB,OACI,gCACI,eAACb,GAAD,UAEQY,EAAkB,WAAY,CAC1BE,aAAcnH,GADlBiH,CAGI,gCACI,eAACJ,GAAD,CAAQO,MAAM,IAAd,sCAEIF,EAAWG,KAAI,SAAAC,GAAC,OAAI,eAACT,GAAD,CAAQO,MAAOE,EAAEnG,IAAjB,SAAmCmG,EAAEtG,MAAVsG,EAAEnG,cAMrE,eAACkF,GAAD,UACKY,EAAkB,eAAgB,CAC/BE,aAAc,GACdI,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,qDAC7C,CAAEgI,IAAK,EAAGhI,QAAS,oEACnB,CAAEiI,IAAK,EAAGjI,QAAS,sEAL1BuH,CASG,qBAAOW,YAAa,yD,GAvCtBnC,aAgDP,QAAKoC,QAAL,CAAcf,ICpDvBT,GAAO,KAAKA,KAEZyB,G,+KAOF,WACI1C,KAAK/B,MAAM0D,QAAQ3B,KAAK/B,MAAM2D,Q,oBAGlC,WACI,IAAQC,EAAsB7B,KAAK/B,MAAM2D,KAAjCC,kBACA/G,EAAiBkF,KAAK/B,MAAtBnD,aACR,OACI,8BACI,eAAC,GAAD,UACK+G,EAAkB,eAAgB,CAE/BE,aAAcjH,EACdqH,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,qDAC7C,CAAEgI,IAAK,EAAGhI,QAAS,oEACnB,CAAEiI,IAAK,EAAGjI,QAAS,sEAN1BuH,CAUG,qBAAOW,YAAa,wD,GA3BnBnC,aAmCV,QAAKoC,QAAL,CAAcC,IC3BRC,G,4MAEjB3J,MAAQ,CACJ8I,WAAY,GACZc,cAAe,GACfhI,SAAU,IACViI,WAAY,GACZC,WAAW,EACXC,WAAY,G,EAIhBC,YAAc,WACV,EAAKC,QAAU,CACX,CACItF,MAAO,iCACPuF,UAAW,QAEf,CACIvF,MAAO,eACPwF,MAAO,IACPD,UAAW,GACXtF,IAAK,IAELwF,OAAQ,SAACC,GAAD,OACJ,kCACI,eAACrF,GAAD,CAAYkC,QAAS,WAAQ,EAAKoD,wBAAwBD,IAA1D,sCAI4B,MAAxB,EAAKrK,MAAM4B,SAAmB,eAACoD,GAAD,CAAYkC,QAAS,WAAQ,EAAKqD,kBAAkBF,IAApD,4CAAsF,Y,EAS5IE,kBAAoB,SAACF,GACjB,EAAKtE,SAAS,CACVnE,SAAUyI,EAAStH,IACnB8G,WAAYQ,EAASzH,OACtB,WAEC,EAAK4H,oB,EAObC,gBAAkB,WACd,EAAK1E,SAAS,CACVnE,SAAU,IACViI,WAAY,GACZD,cAAe,M,EAKvBY,c,uCAAgB,WAAO5I,GAAP,iBAAAqE,EAAA,6DAEZ,EAAKF,SAAS,CAAE+D,WAAW,IAE3BlI,EAAWA,GAAY,EAAK5B,MAAM4B,SAJtB,SAKSD,EAAcC,GALvB,OAKN8I,EALM,OAQZ,EAAK3E,SAAS,CAAE+D,WAAW,IAEL,IAAlBY,EAAOhI,QAEDoG,EAAa4B,EAAOvK,KAET,MAAbyB,EACA,EAAKmE,SAAS,CAAE+C,eAGhB,EAAK/C,SAAS,CAAE6D,cAAed,KAGnCxH,EAAA,EAAQD,MAAM,oDArBN,2C,wDA0BhBsJ,qBAAuB,WACnB,EAAK5E,SAAS,CACVgE,WAAY,K,EAIpBO,wBAA0B,SAACD,GACvB,EAAKA,SAAWA,EAChB,EAAKtE,SAAS,CACVgE,WAAY,K,EAIpBa,aAAe,WACX,EAAK7E,SAAS,CACVgE,WAAY,IAGhB,EAAKnB,KAAKiC,e,EAIdC,YAAc,WAEV,EAAKlC,KAAKmC,eAAV,uCAAyB,WAAOpH,EAAKqF,GAAZ,iBAAA/C,EAAA,yDAChBtC,EADgB,uBAGjB,EAAKoC,SAAS,CACVgE,WAAY,IAKRnI,EAA2BoH,EAA3BpH,SAAUE,EAAiBkH,EAAjBlH,aATD,SAUID,EAAeC,EAAcF,GAVjC,OAWK,IAXL,OAWNc,SAEHd,IAAa,EAAK5B,MAAM4B,SAExB,EAAK4I,gBACe,MAAb5I,GACP,EAAK4I,cAAc,MAjBV,2CAAzB,oCAAAxD,KAAA,iB,EA2BJgE,eAAiB,WAEb,EAAKpC,KAAKmC,eAAV,uCAAyB,WAAOpH,EAAKqF,GAAZ,iBAAA/C,EAAA,yDAChBtC,EADgB,uBAGjB,EAAKoC,SAAS,CACVgE,WAAY,IAGV/H,EAAa,EAAKqI,SAAStH,IAEzBjB,EAAiBkH,EAAjBlH,aAER,EAAK8G,KAAKiC,cAXO,SAaI9I,EAAkB,CAAEC,aAAYF,iBAbpC,OAcK,IAdL,OAcNY,QAEP,EAAK8H,gBAhBQ,2CAAzB,oCAAAxD,KAAA,iB,+DAsBJ,WACIA,KAAKgD,gB,+BAGT,WAEIhD,KAAKwD,kB,oBAGT,WAAU,IAAD,OACL,EAAmFxD,KAAKhH,MAAhF8I,EAAR,EAAQA,WAAYgB,EAApB,EAAoBA,UAAWlI,EAA/B,EAA+BA,SAAUiI,EAAzC,EAAyCA,WAAYD,EAArD,EAAqDA,cAAeG,EAApE,EAAoEA,WAC9DM,EAAWrD,KAAKqD,UAAY,GAE5B1F,EAAqB,MAAb/C,EAAmB,uCAC7B,kCACI,eAACoD,GAAD,CAAYkC,QAASF,KAAKyD,gBAA1B,kDACA,qBAAMvK,KAAM,cAAe+K,MAAO,CAAEC,YAAa,SACjD,gCAAQrB,OAIVsB,EACF,sBAAQjE,QAASF,KAAK2D,qBAAsBzK,KAAM,UAAlD,UACI,qBAAMA,KAAM,SADhB,kBAMJ,OACI,sBAAMyE,MAAOA,EAAOwG,MAAOA,EAA3B,UACI,qBAEIC,UAAU,EAEVC,OAAQ,MAERC,QAASxB,EACTyB,WAAyB,MAAb3J,EAAmBkH,EAAac,EAC5CK,QAASjD,KAAKiD,QAEduB,WAAY,CAAEC,gBAAiB,EAAGC,iBAAiB,KAEvD,oBACI/G,MAAM,2BACNgH,QAAwB,IAAf5B,EACThD,KAAMC,KAAK8D,YACXc,SAAU5E,KAAK4D,aAJnB,SAMI,eAAC,GAAD,CACI9B,WAAYA,EACZlH,SAAUA,EACV+G,QAAS,SAACC,GAAW,EAAKA,KAAOA,OAIzC,oBACIjE,MAAM,2BACNgH,QAAwB,IAAf5B,EACThD,KAAMC,KAAKgE,eACXY,SAAU5E,KAAK4D,aAJnB,SAMI,eAAC,GAAD,CAAY9I,aAAcuI,EAASzH,KAAM+F,QAAS,SAACC,GAAW,EAAKA,KAAOA,c,GA/NtDvB,a,UCVnBwE,G,4MAEjB7L,MAAQ,CACJ8L,MAAO,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IAC3BC,OAAQ,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,K,EAGhCC,OAAS,WACL,EAAKjG,UAAS,SAAA/F,GAAK,MAAK,CACpB8L,MAAO9L,EAAM8L,MAAM7C,KAAI,SAAAgD,GAAI,OAAIA,EAAO,KACtCF,OAAQ/L,EAAM+L,OAAOlE,QAAO,SAACC,EAAK3I,GAE9B,OADA2I,EAAIE,KAAK7I,EAAQ,GACV2I,IACR,S,EAOXoE,UAAY,SAACJ,EAAOC,GAChB,MAAO,CACHpH,MAAO,CACHwH,KAAM,wCAEVC,QAAS,GACTC,OAAQ,CACJlM,KAAM,CAAC,eAAM,iBAEjBmM,MAAO,CACHnM,KAAM,CAAC,eAAM,qBAAO,qBAAO,eAAM,qBAAO,iBAE5CoM,MAAO,GACPC,OAAQ,CAAC,CACL5J,KAAM,eACN1C,KAAM,MACNC,KAAM2L,GACP,CACClJ,KAAM,eACN1C,KAAM,MACNC,KAAM4L,M,4CAKlB,WACI,MAA0B/E,KAAKhH,MAAvB8L,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACf,OACI,iCACI,8BACI,qBAAQ7L,KAAK,UAAUgH,QAASF,KAAKgF,OAArC,4BAGJ,qBAAMrH,MAAM,2BAAZ,SACI,eAAC,KAAD,CAAc8H,OAAQzF,KAAKkF,UAAUJ,EAAOC,c,GAtD/B1E,aCAZqF,G,4MAEjB1M,MAAQ,CACJ8L,MAAO,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IAC3BC,OAAQ,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,K,EAGhCC,OAAS,WACL,EAAKjG,UAAS,SAAA/F,GAAK,MAAK,CACpB8L,MAAO9L,EAAM8L,MAAM7C,KAAI,SAAAgD,GAAI,OAAIA,EAAO,KACtCF,OAAQ/L,EAAM+L,OAAOlE,QAAO,SAACC,EAAK3I,GAE9B,OADA2I,EAAIE,KAAK7I,EAAQ,GACV2I,IACR,S,EAOXoE,UAAY,SAACJ,EAAOC,GAChB,MAAO,CACHpH,MAAO,CACHwH,KAAM,wCAEVC,QAAS,GACTC,OAAQ,CACJlM,KAAM,CAAC,eAAM,iBAEjBmM,MAAO,CACHnM,KAAM,CAAC,eAAM,qBAAO,qBAAO,eAAM,qBAAO,iBAE5CoM,MAAO,GACPC,OAAQ,CAAC,CACL5J,KAAM,eACN1C,KAAM,OACNC,KAAM2L,GACP,CACClJ,KAAM,eACN1C,KAAM,OACNC,KAAM4L,M,4CAKlB,WACI,MAA0B/E,KAAKhH,MAAvB8L,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACf,OACI,iCACI,8BACI,qBAAQ7L,KAAK,UAAUgH,QAASF,KAAKgF,OAArC,4BAGJ,qBAAMrH,MAAM,2BAAZ,SACI,eAAC,KAAD,CAAc8H,OAAQzF,KAAKkF,UAAUJ,EAAOC,c,GAtD9B1E,aCAbsF,G,4MAEjBT,UAAY,WACR,MAAO,CACHvH,MAAO,CACHwH,KAAM,mDACNS,QAAS,2BACTC,EAAG,UAEPT,QAAS,CACLU,QAAS,OACTC,UAAW,6BAEfV,OAAQ,CACJW,OAAQ,WACRC,KAAM,OACN9M,KAAM,CAAC,2BAAQ,2BAAQ,2BAAQ,2BAAQ,6BAE3CqM,OAAQ,CACJ,CACI5J,KAAM,2BACN1C,KAAM,MACNgN,OAAQ,MACRC,OAAQ,CAAC,MAAO,OAChBhN,KAAM,CACF,CAAE6I,MAAO,IAAKpG,KAAM,4BACpB,CAAEoG,MAAO,IAAKpG,KAAM,4BACpB,CAAEoG,MAAO,IAAKpG,KAAM,4BACpB,CAAEoG,MAAO,IAAKpG,KAAM,4BACpB,CAAEoG,MAAO,KAAMpG,KAAM,6BAEzBwK,UAAW,CACPC,SAAU,CACNC,WAAY,GACZC,cAAe,EACfC,YAAa,2B,EASrCC,WAAa,WACT,MAAO,CACHC,gBAAiB,UAEjB/I,MAAO,CACHwH,KAAM,iBACNc,KAAM,SACNU,IAAK,GACLC,UAAW,CACPC,MAAO,SAIfzB,QAAS,CACLU,QAAS,OACTC,UAAW,6BAGfe,UAAW,CACPC,MAAM,EACNzE,IAAK,GACLC,IAAK,IACLyE,QAAS,CACLC,eAAgB,CAAC,EAAG,KAG5BzB,OAAQ,CACJ,CACI5J,KAAM,2BACN1C,KAAM,MACNgN,OAAQ,MACRC,OAAQ,CAAC,MAAO,OAChBhN,KAAM,CACF,CAAE6I,MAAO,IAAKpG,KAAM,4BACpB,CAAEoG,MAAO,IAAKpG,KAAM,4BACpB,CAAEoG,MAAO,IAAKpG,KAAM,4BACpB,CAAEoG,MAAO,IAAKpG,KAAM,4BACpB,CAAEoG,MAAO,IAAKpG,KAAM,6BACtBsL,MAAK,SAAUjI,EAAGkI,GAAK,OAAOlI,EAAE+C,MAAQmF,EAAEnF,SAC5CoF,SAAU,SACVC,MAAO,CACHC,OAAQ,CACJV,UAAW,CACPC,MAAO,8BAInBU,UAAW,CACPD,OAAQ,CACJE,UAAW,CACPX,MAAO,4BAEXY,OAAQ,GACRC,OAAQ,GACRC,QAAS,KAGjBvB,UAAW,CACPkB,OAAQ,CACJT,MAAO,UACPP,WAAY,IACZE,YAAa,uBAIrBoB,cAAe,QACfC,gBAAiB,aACjBC,eAAgB,SAAUC,GACtB,OAAuB,IAAhBC,KAAKC,c,4CAOhC,WACI,OACI,iCACI,qBAAMtK,MAAM,qBAAZ,SACI,eAAC,KAAD,CAAc8H,OAAQzF,KAAKkF,YAAajB,MAAO,CAAEiE,OAAQ,SAE7D,qBAAMvK,MAAM,qBAAZ,SACI,eAAC,KAAD,CAAc8H,OAAQzF,KAAKyG,aAAcxC,MAAO,CAAEiE,OAAQ,gB,GA9H7C7H,aCDZ8H,I,mKACjB,WACI,OACI,sBAAKjK,UAAW,OAAhB,uE,GAHsBmC,cCArB+H,GAAe,gCCStB3G,GAAS,KAAOA,OAED4G,G,4MACjBrP,MAAQ,CACJ8J,WAAW,EACXwF,MAAO,EACPC,SAAU,GACVlN,WAAY,GACZC,WAAY,e,EAIhB0H,YAAc,WACV,EAAKC,QAAU,CACX,CACItF,MAAO,2BACPuF,UAAW,QAEf,CACIvF,MAAO,2BACPuF,UAAW,QAEf,CACIvF,MAAO,eACPwF,MAAO,IACPD,UAAW,QACXE,OAAQ,SAACoF,GACL,MAAO,SAAMA,IAGrB,CACI7K,MAAO,eACPwF,MAAO,IAEPC,OAAQ,SAACtH,GACL,IAAQJ,EAAgBI,EAAhBJ,OAAQK,EAAQD,EAARC,IAChB,OACI,kCACI,qBACI7C,KAAM,UACNgH,QAAS,WAAQ,EAAKuI,aAAa1M,EAAgB,IAAXL,EAAe,EAAI,IAF/D,SAIgB,IAAXA,EAAe,eAAO,iBAE3B,gCAAkB,IAAXA,EAAe,eAAO,4BAK7C,CACIiC,MAAO,eACPwF,MAAO,IAEPC,OAAQ,SAACtH,GAEL,OACI,kCAEI,eAACkC,GAAD,CAAYkC,QAAS,WAAQ,EAAKwI,mBAAmB5M,IAArD,0BACA,eAACkC,GAAD,CAAYkC,QAAS,WAAQ,EAAKjC,MAAM0K,QAAQ3H,KAAK,qBAAsBlF,IAA3E,iC,EASxB2M,a,uCAAe,WAAOhN,EAAWC,GAAlB,SAAAuD,EAAA,sEACUzD,EAAgBC,EAAWC,GADrC,OAEW,IAFX,OAEAA,QAGP,EAAKkN,YAAY,EAAK1N,SALf,2C,0DAUfwN,mBAAqB,SAAC5M,GAClB,EAAKmC,MAAM0K,QAAQ3H,KAAK,mBAAoB,CAAElF,a,EAIlD8M,Y,uCAAc,WAAO1N,GAAP,yCAAA+D,EAAA,yDAAgB9D,EAAhB,+BD7FO,EC8FjB,EAAK4D,SAAS,CAAE+D,WAAW,IAC3B,EAAK5H,QAAUA,EAFL,EAGyB,EAAKlC,MAAhCqC,EAHE,EAGFA,WAAYC,EAHV,EAGUA,WAMD,KAAfD,EATM,iCAWSD,EAAkB,CAC7BF,UAASC,WAAUE,aAAYC,eAZ7B,OAWNoI,EAXM,gDAgBSzI,EAAYC,EAASC,GAhB9B,QAgBNuI,EAhBM,eAmBV,EAAK3E,SAAS,CAAE+D,WAAW,IAEL,IAAlBY,EAAOhI,SAAe,EACEgI,EAAOvK,KAAvBmP,EADa,EACbA,MAAOO,EADM,EACNA,KACf,EAAK9J,SAAS,CACVuJ,QACAC,SAAUM,KAzBR,4C,qHA8Bd,WACI7I,KAAKgD,YAAY,K,+BAErB,WAEIhD,KAAK4I,YAAY,K,oBAGrB,WAAU,IAAD,OACL,EAA+D5I,KAAKhH,MAA5DuP,EAAR,EAAQA,SAAUD,EAAlB,EAAkBA,MAAOxF,EAAzB,EAAyBA,UAAWzH,EAApC,EAAoCA,WAAYC,EAAhD,EAAgDA,WAC1CqC,EACF,kCACI,sBACIqE,MAAO1G,EACP2I,MAAO,CAAEd,MAAO,KAEhB2F,SAAU,SAAA9G,GAAK,OAAI,EAAKjD,SAAS,CAAEzD,WAAY0G,KAJnD,UAMI,eAAC,GAAD,CAAQA,MAAM,cAAd,4CACA,eAAC,GAAD,CAAQA,MAAM,cAAd,+CAEJ,qBACIQ,YAAY,qBACZyB,MAAO,CAAEd,MAAO,IAAKe,YAAa,GAAI6E,WAAY,IAClD/G,MAAO3G,EAEPyN,SAAU,SAAAnJ,GAAK,OAAI,EAAKZ,SAAS,CAAE1D,WAAYsE,EAAMqJ,OAAOhH,WAEhE,qBAAQ9I,KAAM,UAAWgH,QAAS,WAAQ,EAAK0I,YAAY,IAA3D,6BAKFzE,EACF,sBAAQjL,KAAM,UAAWgH,QAAS,kBAAM,EAAKjC,MAAM0K,QAAQ3H,KAAK,uBAAhE,UACI,qBAAM9H,KAAM,SADhB,8BAMJ,OACI,qBAAMyE,MAAOA,EAAOwG,MAAOA,EAA3B,SACI,qBACIC,UAAQ,EACRE,QAASxB,EACTuB,OAAO,MACPE,WAAYgE,EACZtF,QAASjD,KAAKiD,QACduB,WAAY,CACRyE,QAASjJ,KAAK9E,QACduJ,gBD7KC,EC8KDC,iBAAiB,EACjB4D,QAGAQ,SAAU9I,KAAK4I,qB,GAtKEvI,a,mBCJnCY,GAAO,KAAKA,KACGiI,G,4MAEjBlQ,MAAQ,CACJmQ,cAAe,2BACfC,eAAgB,I,EAIpBC,kBAAoB,WAChB,EAAKpL,MAAM0K,QAAQW,U,EAIvBC,Y,sBAAc,0CAAAtK,EAAA,2DAC0B,EAAKhB,MAAMmB,SAASpG,MAAM8C,QAAtDd,EADE,EACFA,WAEY,OAFAwO,EADV,EACUA,aADV,gCAIejO,EAAYP,GAJ3B,OAIA0I,EAJA,OAKFyF,EAAgBzF,EAAOvK,KAAKyC,KAChC,EAAKmD,SAAS,CAAEoK,kBANV,wCAiBgBvP,QAAQ6P,IAAI,CAAClO,EAAYiO,GAAcjO,EAAYP,KAjBnE,QAiBA4B,EAjBA,OAkBFuM,EAAgBvM,EAAQ,GAAGzD,KAAKyC,KAChCwN,EAAiBxM,EAAQ,GAAGzD,KAAKyC,KACrC,EAAKmD,SAAS,CAAEoK,gBAAeC,mBApBzB,4C,uDAuBd,WACIpJ,KAAKuJ,gB,oBAGT,WAEI,MAA0CvJ,KAAKhH,MAAvCmQ,EAAR,EAAQA,cAAeC,EAAvB,EAAuBA,eACvB,EAA4CpJ,KAAK/B,MAAMmB,SAASpG,MAAM8C,QAA9DF,EAAR,EAAQA,KAAM8N,EAAd,EAAcA,KAAMlB,EAApB,EAAoBA,MAAOmB,EAA3B,EAA2BA,OAAQC,EAAnC,EAAmCA,KAE7BjM,EACF,kCACI,eAACK,GAAD,UACI,qBAAM9E,KAAK,aAAa+K,MAAO,CAAEC,YAAa,GAAI2F,SAAU,IAAM3J,QAASF,KAAKqJ,sBAEpF,gEAGR,OACI,qBACI1L,MAAOA,EACPO,UAAW,kBAFf,SAII,gCACI,gBAAC,GAAD,WACI,uBAAMA,UAAW,uBAAjB,4CACA,gCAAOtC,OAEX,gBAAC,GAAD,WACI,uBAAMsC,UAAW,uBAAjB,4CACA,gCAAOwL,OAEX,gBAAC,GAAD,WACI,uBAAMxL,UAAW,uBAAjB,4CACA,kCAAOsK,EAAP,eAEJ,gBAAC,GAAD,WACI,uBAAMtK,UAAW,uBAAjB,4CACA,kCAAOiL,EAAeC,EAAiB,SAAQA,EAAiB,SAEpE,gBAAC,GAAD,WACI,uBAAMlL,UAAW,uBAAjB,4CACA,gCACK0L,EAAK3H,KAAI,SAAC6H,GACP,OAAQ,sBAEJ3J,IAAKiI,GAAe0B,EACpB1J,IAAI,eACJlC,UAAW,uBAHN4L,WAQrB,gBAAC,GAAD,WACI,uBAAM5L,UAAW,uBAAjB,4CACA,uBAAM6L,wBAAyB,CAAEC,OAAQL,iB,GA1FrBtJ,a,0DCL5C,SAAS4J,GAAUC,GACf,OAAO,IAAItQ,SAAQ,SAACC,EAASC,GACzB,IAAMqQ,EAAS,IAAIC,WACnBD,EAAOE,cAAcH,GACrBC,EAAOG,OAAS,kBAAMzQ,EAAQsQ,EAAOzG,SACrCyG,EAAOI,QAAU,SAAAlQ,GAAK,OAAIP,EAAOO,O,IAIpBmQ,G,kDAIjB,WAAYvM,GAAQ,IAAD,uBACf,cAAMA,IAsBVwM,QAAU,WACN,OAAO,EAAKzR,MAAM0R,SAASzI,KAAI,SAAAiI,GAC3B,OAAOA,EAAKtO,SAzBD,EA8BnBgI,aAAe,kBAAM,EAAK7E,SAAS,CAAE4L,gBAAgB,KA9BlC,EAgCnBC,cAhCmB,uCAgCH,WAAMV,GAAN,SAAAjL,EAAA,yDACPiL,EAAKvQ,KAAQuQ,EAAKW,QADX,gCAEaZ,GAAUC,EAAKY,eAF5B,OAERZ,EAAKW,QAFG,cAMZ,EAAK9L,SAAS,CACVgM,aAAcb,EAAKvQ,KAAOuQ,EAAKW,QAC/BF,gBAAgB,IARR,2CAhCG,wDAgDnBK,aAhDmB,uCAgDJ,yCAAA/L,EAAA,yDAASiL,EAAT,EAASA,KAAMQ,EAAf,EAAeA,SAIN,SAAhBR,EAAKxO,OAJE,gBAMe,KADhBgI,EAASwG,EAAK/P,UACTuB,SAAe,EACAgI,EAAOvK,KAArByC,EADa,EACbA,KAAMjC,EADO,EACPA,KACRsR,EAAaP,EAASA,EAAShD,OAAS,IACnC9L,KAAOA,EAClBqP,EAAWtR,IAAMA,GAVd,0BAagB,YAAhBuQ,EAAKxO,OAbL,iCAccC,EAAauO,EAAKtO,MAdhC,OAee,IAff,OAeIF,OACPpB,EAAA,EAAQ4Q,QAAQ,wCAEhB5Q,EAAA,EAAQD,MAAM,wCAlBX,QAsBX,EAAK0E,SAAS,CAAE2L,aAtBL,4CAhDI,sDAIf,IAAIA,EAAW,GACPd,EAAS,EAAK3L,MAAd2L,KALO,OAMXA,GAAQA,EAAKlC,OAAS,IACtBgD,EAAWd,EAAK3H,KAAI,SAAC6H,EAAKqB,GAAN,MAAiB,CACjCC,KAAMD,EACNvP,KAAMkO,EACNpO,OAAQ,OACR/B,IAAKyO,GAAe0B,OAI5B,EAAK9Q,MAAQ,CACT2R,gBAAgB,EAChBI,aAAc,GACdL,YAlBW,E,0CAyEnB,WACI,MAAmD1K,KAAKhH,MAAhD2R,EAAR,EAAQA,eAAgBI,EAAxB,EAAwBA,aAAcL,EAAtC,EAAsCA,SAChCW,EACF,iCACI,qBAAMnS,KAAK,SACX,sBAAKgF,UAAU,kBAAf,uBAGR,OACI,uBAAKA,UAAU,WAAf,UACI,sBACIjF,OAAO,qBACPqS,OAAO,UACP1P,KAAK,QACL2P,SAAS,eACTb,SAAUA,EACVc,UAAWxL,KAAK4K,cAChB9B,SAAU9I,KAAKgL,aAPnB,UASKN,EAAShD,QAAU,EAAI,KAAO2D,EATnC,WAYA,oBAAO1G,QAASgG,EAAgBc,OAAQ,KAAM7G,SAAU5E,KAAK4D,aAA7D,SACI,sBAAKxD,IAAI,UAAU6D,MAAO,CAAEd,MAAO,QAAUhD,IAAK4K,a,GApG5BW,IAAMrL,W,8DCL3BsL,I,yDAKjB,WAAY1N,GAAQ,IAAD,uBACf,cAAMA,IAsBV2N,oBAAsB,SAACC,GACnB,EAAK9M,SAAS,CACV8M,iBAzBW,EA4BnBC,UAAY,WAER,OAAOC,KAAYC,wBAAa,EAAKhT,MAAM6S,YAAYI,uBA9BxC,EAgCnBC,oBAAsB,SAAChC,GACnB,OAAO,IAAItQ,SACP,SAACC,EAASC,GACN,IAAMqS,EAAM,IAAIC,eAChBD,EAAIE,KAAK,OAAQ,sBACjB,IAAMlT,EAAO,IAAImT,SACjBnT,EAAKoT,OAAO,QAASrC,GACrBiC,EAAIK,KAAKrT,GACTgT,EAAIM,iBAAiB,QAAQ,WACzB,IACM9S,EADW+S,KAAKC,MAAMR,EAAIS,cACXzT,KAAKQ,IAC1BE,EAAQ,CAAEV,KAAM,CAAE0T,KAAMlT,QAE5BwS,EAAIM,iBAAiB,SAAS,WAC1B,IAAMpS,EAAQqS,KAAKC,MAAMR,EAAIS,cAC7B9S,EAAOO,UA3CnB,IAAMyS,EAAO,EAAK7O,MAAM0L,OACxB,GAAImD,EAAM,CACN,IAAMC,EAAeC,KAAYF,GACjC,GAAIC,EAAc,CACd,IAAME,EAAeC,gBAAaC,qBAAqBJ,EAAaK,eAC9DvB,EAAcwB,eAAYC,kBAAkBL,GAClD,EAAKjU,MAAQ,CACT6S,qBAIR,EAAK7S,MAAQ,CACT6S,YAAawB,eAAYE,eAhBlB,S,0CAqDnB,WACI,IAAQ1B,EAAgB7L,KAAKhH,MAArB6S,YACR,OACI,+BACI,eAAC,UAAD,CACIA,YAAaA,EACb2B,YAAa,CAAEC,OAAQ,kBAAmBC,UAAW,IAAKC,YAAa,IACvE/B,oBAAqB5L,KAAK4L,oBAC1BgC,QAAS,CACLC,MAAO,CAAEC,eAAgB9N,KAAKkM,oBAAqB9L,IAAK,CAAE2N,SAAS,EAAMC,WAAW,a,GAnEhE3N,cCKtCY,GAAO,KAAKA,KACVgN,GAAR,KAAQA,SAGFC,G,kDAMF,WAAYjQ,GAAQ,IAAD,8BACf,cAAMA,IANVjF,MAAQ,CACJmV,QAAS,IAIM,EAQnB9E,kBAAoB,WAChB,EAAKpL,MAAM0K,QAAQW,UATJ,EAanB8E,cAAgB,SAACC,EAAMrM,EAAOsM,GACd,EAARtM,EAAY,EACZsM,IAEAA,EAAS,oCAjBE,EAwBnBC,SAxBmB,uCAwBR,WAAMC,GAAN,mBAAAvP,EAAA,6DAEDwP,EAAeD,EAAgB,IAExBlK,SAAU,EAJhB,SAOqB,EAAKd,cAAciL,EAAazM,OAPrD,OAODY,EAPC,OAQP6L,EAAanK,SAAU,EAEnB1B,GAA0C,IAAzBA,EAAc8E,QACzBgH,EAAe9L,EAAcX,KAAI,SAACC,GAAD,MAAQ,CAC3CF,MAAOE,EAAEnG,IACTsL,MAAOnF,EAAEtG,KACT+S,QAAQ,MAGZF,EAAa1Q,SAAW2Q,GAExBD,EAAaE,QAAS,EAG1B,EAAK5P,SAAS,CACVoP,QAAQ,aAAK,EAAKnV,MAAMmV,WAvBrB,2CAxBQ,wDAoDnB3K,cApDmB,uCAoDH,WAAO5I,GAAP,iBAAAqE,EAAA,sEACStE,EAAcC,GADvB,UAEU,KADhB8I,EADM,QAEDhI,OAFC,oBAIFoG,EAAa4B,EAAOvK,KACT,MAAbyB,EALI,gBAMJ,EAAKgU,YAAY9M,GANb,gDAQGA,GARH,4CApDG,wDAmEnB8M,YAnEmB,uCAmEL,WAAO9M,GAAP,2BAAA7C,EAAA,yDAEJkP,EAAUrM,EAAWG,KAAI,SAAAC,GAAC,MAAK,CACjCF,MAAOE,EAAEnG,IACTsL,MAAOnF,EAAEtG,KACT+S,QAAQ,MALF,kBASFE,EATE,EASFA,SAAU/S,EATR,EASQA,QACV0N,EAAgB1N,EAAhB0N,aACJqF,GAA4B,MAAhBrF,EAXN,iCAasB,EAAKhG,cAAcgG,GAbzC,OAaA5G,EAbA,OAeA8L,EAAe9L,EAAcX,KAAI,SAAAC,GAAC,MAAK,CACzCF,MAAOE,EAAEnG,IACTsL,MAAOnF,EAAEtG,KACT+S,QAAQ,MAGSR,EAAQ1O,MAAK,SAAAgG,GAAM,OAAIA,EAAOzD,QAAUwH,KAEhDzL,SAAW2Q,EAvBlB,QA2BV,EAAK3P,SAAS,CAAEoP,YA3BN,4CAnEK,wDAkGnBW,OAAS,WACL,EAAK7Q,MAAM2D,KAAKmC,eAAhB,uCAA+B,WAAO1J,EAAO0U,GAAd,+BAAA9P,EAAA,yDACtB5E,EADsB,wBAGfuB,EAAmCmT,EAAnCnT,KAAM8N,EAA6BqF,EAA7BrF,KAAMlB,EAAuBuG,EAAvBvG,MAAOwG,EAAgBD,EAAhBC,YAErBpF,EAAO,EAAKqF,YAAYhG,QAAQwB,UAChCd,EAAS,EAAKuF,eAAejG,QAAQ6C,YAEhB,IAAvBkD,EAAYtH,QACZ8B,EAAc,IACdxO,EAAagU,EAAY,KAEzBxF,EAAcwF,EAAY,GAC1BhU,EAAagU,EAAY,IAEvBlT,EAAU,CAAEF,OAAM8N,OAAMlB,QAAOoB,OAAMD,SAAQH,cAAaxO,cAC5D,EAAK6T,WACL/S,EAAQC,IAAM,EAAKD,QAAQC,KAjBR,SAoBFF,EAAsBC,GApBpB,OAsBD,IAtBC,OAsBZJ,QACPpB,EAAA,EAAQ4Q,QAAR,UAAmB,EAAK2D,SAAW,eAAO,eAA1C,6BACA,EAAK5Q,MAAM0K,QAAQW,UAEnBhP,EAAA,EAAQD,MAAR,UAAiB,EAAKwU,SAAW,eAAO,eAAxC,6BA1BmB,4CAA/B,oCAAA7O,KAAA,iBAhGA,EAAKiP,YAAcvD,IAAMyD,YACzB,EAAKD,eAAiBxD,IAAMyD,YAJb,E,6DAmInB,WAEI,IAAMrT,EAAUkE,KAAK/B,MAAMmB,SAASpG,MAEpCgH,KAAK6O,WAAa/S,EAGlBkE,KAAKlE,QAAUA,GAAW,K,+BAI9B,WACIkE,KAAKwD,cAAc,O,oBAGvB,WACI,IAAQ3B,EAAsB7B,KAAK/B,MAAM2D,KAAjCC,kBACAgN,EAAsB7O,KAAtB6O,SAAU/S,EAAYkE,KAAZlE,QACZkT,EAAc,GACZhU,EAA0Cc,EAA1Cd,WAAYwO,EAA8B1N,EAA9B0N,YAAaI,EAAiB9N,EAAjB8N,KAAMD,EAAW7N,EAAX6N,OAEnB,MAAhBH,GAIAwF,EAAYhO,KAAKwI,GAHjBwF,EAAYhO,KAAKhG,GAMrB,IAAM2C,EACF,kCACI,eAACK,GAAD,UACI,qBAAM9E,KAAM,aAAc+K,MAAO,CAAEC,YAAa,GAAI2F,SAAU,IAAM3J,QAASF,KAAKqJ,sBAGtF,gCAAOwF,EAAW,2BAAS,gCAenC,OACI,qBAAMlR,MAAOA,EAAb,SACI,gDAbe,CACnByR,SAAU,CACNC,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,IAEhBE,WAAY,CACRH,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,MAMZ,cACI,eAAC,GAAD,CAAMjI,MAAO,2BAAb,SAEQxF,EAAkB,OAAQ,CACtBE,aAAcjG,EAAQF,KACtBuG,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,oDAC7C,CAAEgI,IAAK,EAAGhI,QAAS,oEACnB,CAAEiI,IAAK,EAAGjI,QAAS,sEAL3BuH,CAOG,qBAAOW,YAAa,kDAG/B,eAAC,GAAD,CAAM6E,MAAO,2BAAb,SAEQxF,EAAkB,OAAQ,CACtBE,aAAcjG,EAAQ4N,KACtBvH,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,oDAC7C,CAAEgI,IAAK,EAAGhI,QAAS,qEACnB,CAAEiI,IAAK,GAAIjI,QAAS,uEAL5BuH,CAOG,eAACoM,GAAD,CAAUzL,YAAY,6CAAUiN,SAAU,CAAEC,QAAS,EAAGC,QAAS,QAG5E,eAAC,GAAD,CAAMtI,MAAO,2BAAb,SAEQxF,EAAkB,QAAS,CACvBE,aAAcjG,EAAQ0M,MACtBrG,MAAO,CACH,CAAEC,UAAU,EAAM9H,QAAS,wCAC3B,CAAEsV,UAAW5P,KAAKoO,iBAJ1BvM,CAMG,qBAAOW,YAAa,iFAAiBtJ,KAAK,SAAS2W,WAAW,cAGzE,eAAC,GAAD,CAAMxI,MAAO,2BAAb,SAEQxF,EAAkB,cAAe,CAC7BE,aAAciN,EACd7M,MAAO,CACH,CAAEC,UAAU,EAAM9H,QAAS,sDAHnCuH,CAMI,qBACIW,YAAY,6CACZ2L,QAASnO,KAAKhH,MAAMmV,QACpBI,SAAUvO,KAAKuO,cAK/B,eAAC,GAAD,CAAMlH,MAAO,2BAAb,SAGI,eAAC,GAAD,CAAcyI,IAAK9P,KAAKiP,YAAarF,KAAMA,MAY/C,eAAC,GAAD,CACIvC,MAAO,2BACP+H,SAAU,CAAEC,GAAI,CAAEC,KAAM,IAAMC,GAAI,CAAED,KAAM,IAC1CE,WAAY,CAAEH,GAAI,CAAEC,KAAM,IAAMC,GAAI,CAAED,KAAM,KAHhD,SAKI,eAAC,GAAD,CAAgBQ,IAAK9P,KAAKkP,eAAgBvF,OAAQA,MAGtD,eAAC,GAAD,UACI,qBAAQzQ,KAAM,UAAWgH,QAASF,KAAK8O,OAAvC,sC,GAxQOzO,aAiRhB,QAAKoC,QAAL,CAAcyL,IC5RR6B,I,mKACjB,WACI,OACI,gBAAC,IAAD,WACI,eAAC,IAAD,CAAO5Q,KAAM,WAAY6Q,UAAW3H,GAAa4H,OAAK,IACtD,eAAC,IAAD,CAAO9Q,KAAM,mBAAoB6Q,UAAW9G,KAC5C,eAAC,IAAD,CAAO/J,KAAM,qBAAsB6Q,UAAW9B,KAC9C,eAAC,IAAD,CAAUhN,GAAI,oB,GAPOb,cCH/BY,GAAO,KAAKA,KAGZS,G,+KAMF,WACI1B,KAAK/B,MAAM0D,QAAQ3B,KAAK/B,MAAM2D,Q,oBAGlC,WACI,IAAQC,EAAsB7B,KAAK/B,MAAM2D,KAAjCC,kBAYR,OACI,+CAXmB,CACnBuN,SAAU,CACNC,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,IAEhBE,WAAY,CACRH,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,OAIhB,aACI,eAAC,GAAD,CAAMjI,MAAO,2BAAb,SACKxF,EAAkB,WAAY,CAC3BE,aAAc,GACdI,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,qDAC7C,CAAEgI,IAAK,EAAGhI,QAAS,oEACnB,CAAEiI,IAAK,EAAGjI,QAAS,sEAL1BuH,CAQG,qBAAOW,YAAa,yD,GAlCtBnC,aA0CP,QAAKoC,QAAL,CAAcf,I,mBCzCvBT,GAAO,KAAKA,KACViP,GAAR,KAAQA,SAEaC,G,kDAKjB,WAAYlS,GAAQ,IAAD,uBACf,cAAMA,IAUVmS,QAAU,kBAAM,EAAKpX,MAAMqX,aAXR,EAcnBC,aAAe,SAAC5S,GACZ,OAAOA,EAASmD,QAAO,SAACC,EAAKvB,GAOzB,OANAuB,EAAIE,KACA,eAACkP,GAAD,CAAUvS,MAAO4B,EAAK5B,MAAtB,SACK4B,EAAKxB,SAAW,EAAKuS,aAAa/Q,EAAKxB,UAAY,MADtBwB,EAAK3B,MAKpCkD,IACR,KAvBY,EA0BnByP,QAAU,SAAAF,GACN,EAAKtR,SAAS,CAAEsR,iBAvBhB,IAAQ1P,EAAU,EAAK1C,MAAM9B,KAArBwE,MAJO,OAKf,EAAK3H,MAAQ,CACTqX,YAAa1P,GANF,E,6DAkCnB,WAEIX,KAAKwQ,UAAYxQ,KAAKsQ,aAAa5S,M,8CAGvC,SAAiC+S,EAAWC,GAExC,IAAM/P,EAAQ8P,EAAUtU,KAAKwE,MAC7BX,KAAKjB,SAAS,CAAEsR,YAAa1P,M,oBAGjC,WAEI,IAAQxE,EAAS6D,KAAK/B,MAAd9B,KACAkU,EAAgBrQ,KAAKhH,MAArBqX,YAWR,OACI,iCACI,eAAC,GAAD,yBAAMhJ,MAAO,4BAZE,CACnB+H,SAAU,CACNC,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,IAEhBE,WAAY,CACRH,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,OAKZ,aACI,qBAAOtN,MAAO7F,EAAKP,KAAM+U,UAAU,OAEvC,qBACIC,WAAS,EACTC,kBAAkB,EAClBR,YAAaA,EACbE,QAASvQ,KAAKuQ,QAJlB,SAMI,eAACL,GAAD,CAAUvS,MAAM,2BAAhB,SACKqC,KAAKwQ,WADiB,gB,GA3ETnQ,aCKhCyQ,G,kDAGF,WAAY7S,GAAQ,IAAD,8BACf,cAAMA,IAWV8S,SAZmB,sBAYR,8BAAA9R,EAAA,sExBiBevF,EAAKgB,qBwBjBpB,OAEe,KADhBgJ,EADC,QAEIhI,SACDsV,EAAQtN,EAAOvK,KACrB,EAAK4F,SAAS,CAAEiS,WAJb,2CAZQ,EAqBnBhO,YAAc,WACV,EAAKC,QAAU,CACX,CACItF,MAAO,2BACPuF,UAAW,QAEf,CACIvF,MAAO,2BACPuF,UAAW,cACXE,OAAQpG,IAEZ,CACIW,MAAO,2BACPuF,UAAW,YACXE,OAAQpG,IAEZ,CACIW,MAAO,qBACPuF,UAAW,eAvCJ,EA4CnB+N,MAAQ,SAAC9U,GACL,MAAO,CACH+D,QAAS,SAAAP,GACL,EAAKZ,SAAS,CAAE5C,YA/CT,EAoDnB+U,QAAU,WAEN,EAAKtP,KAAKmC,eAAV,uCAAyB,WAAO1J,EAAO2H,GAAd,mBAAA/C,EAAA,yDAEhB,EAAKjG,MAAMgY,MAAMvR,MAAK,SAACtD,GAAD,OAAUA,EAAKP,OAASoG,EAAM/F,YAFpC,oBAITA,EAAa+F,EAAb/F,SACH5B,EALY,gCAOQ2B,EAAWC,GAPnB,OAQS,KADhByH,EAPO,QAQFhI,QACPpB,EAAA,EAAQ4Q,QAAQ,wCACViG,EAAUzN,EAAOvK,KAIvB,EAAK4F,UAAS,SAAC/F,GAAD,MAAY,CAEtBgY,MAAM,GAAD,oBAAMhY,EAAMgY,OAAZ,CAAmBG,IAExBC,eAAe,OAGnB9W,EAAA,EAAQD,MAAM,wCArBL,OAwBjB,EAAKuH,KAAKiC,cAxBO,wBA0BjBvJ,EAAA,EAAQD,MAAR,UAAiB2H,EAAMpG,KAAvB,mFA1BiB,4CAAzB,oCAAAoE,KAAA,iBAtDe,EAuFnBqR,WAvFmB,sBAuFN,8BAAApS,EAAA,6DAET,EAAKF,SAAS,CACVuS,gBAAgB,IAEZnV,EAAS,EAAKnD,MAAdmD,KACFwE,EAAQ,EAAK4Q,SAAStI,QAAQmH,UAEpCjU,EAAKwE,MAAQA,EACbxE,EAAKqV,UAAY,EAAKvT,MAAM/F,KAAKsC,SACjC2B,EAAKsV,UAAYtU,KAAKwB,MAVb,SAYYzC,EAAcC,GAZ1B,OAaa,IAbb,OAaET,QACP,EAAKqD,SAAS,CAAEiS,MAAM,aAAK,EAAKhY,MAAMgY,SAElC7U,EAAKJ,MAAQ,EAAKkC,MAAM/F,KAAKwZ,SAC7B,EAAKzT,MAAMO,SAEflE,EAAA,EAAQ4Q,QAAQ,yCAEhB5Q,EAAA,EAAQD,MAAM,4BArBT,4CArFT,EAAKrB,MAAQ,CACTgY,MAAO,GACP7U,KAAM,GACNiV,eAAe,EACfE,gBAAgB,GAEpB,EAAKC,SAAW7F,IAAMyD,YARP,E,6DAkHnB,WACInP,KAAKgD,gB,+BAGT,WACIhD,KAAK+Q,a,oBAGT,WAAU,IAAD,OACL,EAAuD/Q,KAAKhH,MAApDgY,EAAR,EAAQA,MAAO7U,EAAf,EAAeA,KAAMiV,EAArB,EAAqBA,cAAeE,EAApC,EAAoCA,eAC9B3T,EACF,kCACI,qBAAQzE,KAAM,UAAW+K,MAAO,CAAEC,YAAa,IAAMhE,QAAS,WAAQ,EAAKnB,SAAS,CAAEqS,eAAe,KAArG,sCACA,qBAAQlY,KAAM,UAAWyX,UAAWxU,EAAKJ,IAAKmE,QAAS,WAAQ,EAAKnB,SAAS,CAAEuS,gBAAgB,KAA/F,qDAIR,OACI,sBAAM3T,MAAOA,EAAb,UACI,qBAEIyG,UAAU,EAEVC,OAAQ,MACRE,WAAYyM,EACZ/N,QAASjD,KAAKiD,QAEduB,WAAY,CAAEC,gBT/JT,GSiKLkN,aAAc,CAIVzY,KAAM,QAEN0Y,gBAAiB,CAACzV,EAAKJ,KACvB8V,SAAU,SAAC1V,GACP,EAAK4C,SAAS,CACV5C,WAKZ8U,MAAOjR,KAAKiR,QAGhB,oBACItT,MAAM,2BACNgH,QAASyM,EACTrR,KAAMC,KAAKkR,QACXtM,SAAU,WACN,EAAK7F,SAAS,CAAEqS,eAAe,KALvC,SAQI,eAAC,GAAD,CACIzP,QAAS,SAACC,GAAD,OAAU,EAAKA,KAAOA,OAGvC,oBACIjE,MAAM,uCACNgH,QAAS2M,EACTvR,KAAMC,KAAKqR,WACXzM,SAAU,WACN,EAAK7F,SAAS,CAAEuS,gBAAgB,KALxC,SAQI,eAAC,GAAD,CACInV,KAAMA,EACN2T,IAAK9P,KAAKuR,oB,GAzLflR,aAiMJC,gBACX,SAAAtH,GAAK,MAAK,CAAEd,KAAMc,EAAMd,QACxB,CAAEsG,WAFS8B,CAGbwQ,IC7MIrP,GAAS,KAAOA,OAChBR,GAAO,KAAKA,KAGZ6Q,G,4MAQFC,oBAAsB,SAAC1D,EAAMrM,EAAOsM,GAC3BtM,GAAOsM,EAAS,+CACA,KAAjBtM,EAAM0F,QAAe4G,EAAS,mEAC7B,iBAAiB0D,KAAKhQ,IAAQsM,EAAS,mEAC5CA,K,EAGJ2D,YAAc,SAAC5D,EAAMrM,EAAOsM,GACnBtM,GAAOsM,EAAS,yCACjBtM,EAAM0F,OAAS,GAAG4G,EAAS,oHAC3BtM,EAAM0F,OAAS,IAAI4G,EAAS,oHAC3B,kBAAkB0D,KAAKhQ,IAAQsM,EAAS,wFAC7CA,K,EAGJ4D,cAAgB,SAAC7D,EAAMrM,EAAOsM,GACrBtM,GAAOsM,EAAS,yCAChB,gDAAgD0D,KAAKhQ,IAAQsM,EAAS,mGAC3EA,K,+DAIJ,WACItO,KAAK/B,MAAMkU,YAAYnS,KAAK/B,MAAM2D,Q,oBAGtC,WACI,IAAQC,EAAsB7B,KAAK/B,MAAM2D,KAAjCC,kBACR,EAAwB7B,KAAK/B,MAArB+S,EAAR,EAAQA,MAAO9Y,EAAf,EAAeA,KAaf,OACI,gDAXmB,CACnBkX,SAAU,CACNC,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,IAEhBE,WAAY,CACRH,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,OAIhB,cACI,eAAC,GAAD,CAAMjI,MAAO,qBAAb,SACKxF,EAAkB,WAAY,CAC3BE,aAAc7J,EAAKsC,SACnB2H,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,yCAC7C,CAAEgI,IAAK,EAAGhI,QAAS,+DACnB,CAAEiI,IAAK,GAAIjI,QAAS,+DACpB,CAAE8X,QAAS,kBAAmB9X,QAAS,gGAN9CuH,CASG,qBAAOW,YAAa,4CAMxBtK,EAAK6D,IAAM,KACP,eAAC,GAAD,CAAMsL,MAAO,eAAb,SACKxF,EAAkB,WAAY,CAC3BE,aAAc7J,EAAKuC,SACnB0H,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,yCAC7C,CAAEsV,UAAW5P,KAAKiS,eAJzBpQ,CAOG,qBAAOW,YAAa,iCAAStJ,KAAM,gBAKnD,eAAC,GAAD,CAAMmO,MAAO,qBAAb,SACKxF,EAAkB,QAAS,CACxBE,aAAc7J,EAAKma,MACnBlQ,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,gDAC7C,CAAEsV,UAAW5P,KAAK+R,uBAJzBlQ,CAOG,qBAAOW,YAAa,uCAAUtJ,KAAM,cAI5C,eAAC,GAAD,CAAMmO,MAAO,eAAb,SACKxF,EAAkB,QAAS,CACxBE,aAAc7J,EAAKoa,MACnBnQ,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,yCAC7C,CAAEsV,UAAW5P,KAAKkS,iBAJzBrQ,CAOG,qBAAOW,YAAa,sCAI5B,eAAC,GAAD,CAAM6E,MAAO,eAAb,SACKxF,EAAkB,UAAW,CAC1BE,aAAc7J,EAAKwZ,QACnBvP,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,oCAHpDuH,CAMG,8BAEQmP,EAAM/O,KAAI,SAAA9F,GAAI,OAAK,eAAC,GAAD,CAAQ6F,MAAO7F,EAAKJ,IAApB,SAAyCI,EAAKP,MAAhBO,EAAKJ,qB,GAlH/DwW,iBA2HR,QAAK9P,QAAL,CAAcqP,ICtHRU,G,4MACjBxZ,MAAQ,CACJ+J,YAAY,EACZ0P,MAAO,GACPzB,MAAO,I,EAIX0B,gBAAkB,WACd,EAAK3T,SAAS,CAAEgE,YAAY,IAC5B,EAAK4P,KAAK5O,eAAV,uCAAyB,WAAO1J,EAAO2H,GAAd,eAAA/C,EAAA,yDAChB5E,EADgB,uBAGbnC,EAAO8J,EAEP,EAAK9J,OACLA,EAAK6D,IAAM,EAAK7D,KAAK6D,KANR,SAQIQ,GAAiBrE,GARrB,OASK,IATL,OASNwD,QACPpB,EAAA,EAAQ4Q,QAAR,UAAmB,EAAKhT,KAAO,eAAO,eAAtC,6BACA,EAAK0a,WACL,EAAKD,KAAK9O,eAEVvJ,EAAA,EAAQD,MAAR,UAAiB,EAAKnC,KAAO,eAAO,eAApC,6BAda,2CAAzB,oCAAA8H,KAAA,iB,EAqBJ6S,WAAa,SAAC3a,GACV,IAAM2H,QAAQ,CACVlC,MAAM,2BAAD,OAASzF,EAAKsC,SAAd,gBACLuF,KAAK,WAAD,4BAAE,sBAAAd,EAAA,sEACmB5C,GAAcnE,EAAK6D,KADtC,OAEoB,IAFpB,OAESL,QACPpB,EAAA,EAAQ4Q,QAAQ,4BAChB,EAAK0H,YAELtY,EAAA,EAAQD,MAAM,4BANhB,2CAAF,kDAAC,M,EAabyY,eAAiB,SAAC5a,GACd,EAAKA,KAAOA,EACZ,EAAK6G,SAAS,CAAEgE,YAAY,K,EAIhCgQ,YAAc,WAEV,EAAK7a,KAAO,KACZ,EAAK6G,SAAS,CAAEgE,YAAY,K,EAIhC6P,S,sBAAW,kCAAA3T,EAAA,sEACc7C,IADd,OAEe,KADhBsH,EADC,QAEIhI,SAAe,EACGgI,EAAOvK,KAAxBsZ,EADa,EACbA,MAAOzB,EADM,EACNA,MACf,EAAKgC,cAAchC,GACnB,EAAKjS,SAAS,CAAE0T,QAAOzB,WALpB,2C,EAUXgC,cAAgB,SAAChC,GACb,IAAMiC,EAAYjC,EAAMnQ,QAAO,SAACC,EAAK3E,GAEjC,OADA2E,EAAI3E,EAAKJ,KAAOI,EAAKP,KACdkF,IACR,IACH,EAAKmS,UAAYA,G,EAGrBjQ,YAAc,WACV,EAAKC,QAAU,CACX,CACItF,MAAO,qBACPuF,UAAW,YAEf,CACIvF,MAAO,eACPuF,UAAW,SAEf,CACIvF,MAAO,eACPuF,UAAW,SAEf,CACIvF,MAAO,2BACPuF,UAAW,cACXE,OAAQpG,IAEZ,CACIW,MAAO,2BACPuF,UAAW,UAIXE,OAAQ,SAACsO,GAAD,OAAa,EAAKuB,UAAUvB,KAIxC,CACI/T,MAAO,eACPyF,OAAQ,SAAClL,GAAD,OACJ,kCACI,eAAC8F,GAAD,CAAYkC,QAAS,WAAQ,EAAK4S,eAAe5a,IAAjD,0BACA,eAAC8F,GAAD,CAAYkC,QAAS,WAAQ,EAAK2S,WAAW3a,IAA7C,iC,+DAOpB,WACI8H,KAAKgD,gB,+BAGT,WACIhD,KAAK4S,a,oBAGT,WAAU,IAAD,OACL,EAAqC5S,KAAKhH,MAAlC+J,EAAR,EAAQA,WAAY0P,EAApB,EAAoBA,MAAOzB,EAA3B,EAA2BA,MACrB9Y,EAAO8H,KAAK9H,MAAQ,GACpByF,EACF,gCACI,qBAAQzE,KAAM,UAAWgH,QAASF,KAAK+S,YAAvC,wCAKR,OACI,sBAAMpV,MAAOA,EAAb,UACI,qBAEIyG,UAAU,EAEVC,OAAQ,MACRE,WAAYkO,EACZxP,QAASjD,KAAKiD,QACduB,WAAY,CAAEC,gBXjKT,KWqKT,oBACI9G,MAAOzF,EAAKsC,SAAW,iCAAUtC,EAAKsC,SAAW,2BACjDmK,QAAS5B,EACThD,KAAMC,KAAK0S,gBACX9N,SAAU,WACN,EAAK7F,SAAS,CAAEgE,YAAY,IAC5B,EAAKnB,KAAKiC,eANlB,SASI,eAAC,GAAD,CACIsO,YAAa,SAAAvQ,GAAI,OAAI,EAAK+Q,KAAO/Q,GACjCoP,MAAOA,EACP9Y,KAAMA,a,GAlKImI,a,oCCD5B6S,I,mNAEJC,OAAS,WACP,EAAKlV,MAAME,aAAa,gBACxB,EAAKF,MAAM0K,QAAQyK,QAAQ,U,4CAG7B,WACE,OAEE,sBAAKlV,UAAU,YAAf,UACE,qBAAKoR,KAAM,GAAIpR,UAAU,SACzB,sBAAKoR,KAAM,GAAIpR,UAAU,QAAzB,UACE,sCACA,2GACA,+BACE,qBAAQhF,KAAK,UAAUgH,QAASF,KAAKmT,OAArC,kD,GAhBW9S,cA0BRC,eACb,KACA,CAAEnC,iBAFWmC,CAGb4S,IC7BMG,I,OAAR,IAAQA,QAAQC,GAAhB,IAAgBA,MAAOC,GAAvB,IAAuBA,QAEjBC,G,4JACF,WACI,IAAMtb,EAAO8H,KAAK/B,MAAM/F,KACxB,OAAKA,GAASA,EAAK6D,IAIf,qBAAQkI,MAAO,CAAEyJ,UAAW,QAA5B,UACI,eAAC4F,GAAD,UACI,eAAC,GAAD,MAEJ,+BACI,eAAC,GAAD,IACA,eAACC,GAAD,CAASrV,UAAW,UAApB,SACI,gBAAC,IAAD,WACI,eAAC,IAAD,CAAU+R,OAAK,EAAC0C,KAAK,IAAIzR,GAAG,UAC5B,eAAC,IAAD,CAAO/B,KAAK,QAAQ6Q,UAAW7H,KAC/B,eAAC,IAAD,CAAOhJ,KAAK,YAAY6Q,UAAWyD,KACnC,eAAC,IAAD,CAAOtU,KAAK,WAAW6Q,UAAWD,KAClC,eAAC,IAAD,CAAO5Q,KAAK,QAAQ6Q,UAAWwC,KAC/B,eAAC,IAAD,CAAOrT,KAAK,QAAQ6Q,UAAWc,KAC/B,eAAC,IAAD,CAAO3R,KAAK,cAAc6Q,UAAWnL,KACrC,eAAC,IAAD,CAAO1F,KAAK,eAAe6Q,UAAWtK,KACtC,eAAC,IAAD,CAAOvG,KAAK,cAAc6Q,UAAWrK,KAErC,eAAC,IAAD,CAAOqK,UAAWkD,UAG1B,eAACG,GAAD,CAAQpP,MAAO,CAAEyP,UAAW,SAAU7M,MAAO,QAA7C,8JAxBD,eAAC,IAAD,CAAU3F,GAAG,e,GAJZb,aAoCLC,gBACX,SAAAtH,GAAK,MAAK,CAAEd,KAAMc,EAAMd,QACxB,GAFWoI,CAGbkT,IClDIG,I,mNACFC,aAAe,SAAAC,GAEXA,EAAEjU,iBAEF,EAAK3B,MAAM2D,KAAKmC,eAAhB,uCAA+B,WAAOpH,EAAKoS,GAAZ,mBAAA9P,EAAA,sDAEtBtC,IAEOnC,EAAuBuU,EAAvBvU,SAAUC,EAAasU,EAAbtU,SAClB,EAAKwD,MAAM6V,MAAMtZ,EAAUC,IAGrBrB,EAAS,EAAK6E,MAAM/F,KAAKkB,SAE3BkB,EAAA,EAAQD,MAAMjB,IAVK,2CAA/B,oCAAA4G,KAAA,iB,EAkBJiS,YAAc,SAAC5D,EAAMrM,EAAOsM,GACnBtM,GAAOsM,EAAS,yCACjBtM,EAAM0F,OAAS,GAAG4G,EAAS,oHAC3BtM,EAAM0F,OAAS,IAAI4G,EAAS,oHAC3B,kBAAkB0D,KAAKhQ,IAAQsM,EAAS,wFAC7CA,K,4CAGJ,WAEI,IAAMpW,EAAO8H,KAAK/B,MAAM/F,KACxB,GAAIA,GAAQA,EAAK6D,IACb,OAAO,eAAC,IAAD,CAAUmF,GAAG,UAKxB,IAAQW,EAAsB7B,KAAK/B,MAAM2D,KAAjCC,kBACR,OACI,uBAAK3D,UAAU,QAAf,UACI,uBAAKA,UAAU,eAAf,UACI,sBAAKiC,IAAKiB,GAAMhB,IAAI,SACpB,0EAEJ,2BAASlC,UAAU,gBAAnB,UACI,2DACA,sBAAM6V,SAAU/T,KAAK4T,aAAc1V,UAAU,aAA7C,UACI,oBAAM+C,KAAN,UACKY,EAAkB,WAAY,CAE3BE,aAAc,QACdI,MAAO,CACH,CAAEC,UAAU,EAAMC,YAAY,EAAM/H,QAAS,yCAC7C,CAAEgI,IAAK,EAAGhI,QAAS,+DACnB,CAAEiI,IAAK,GAAIjI,QAAS,+DACpB,CAAE8X,QAAS,kBAAmB9X,QAAS,gGAP9CuH,CAUG,qBACImS,OAAQ,qBAAM9a,KAAK,OAAO+K,MAAO,CAAE4C,MAAO,qBAC1CrE,YAAY,0BAIxB,oBAAMvB,KAAN,UACKY,EAAkB,WAAY,CAC3BM,MAAO,CACH,CAAEyN,UAAW5P,KAAKiS,eAFzBpQ,CAKG,qBACImS,OAAQ,qBAAM9a,KAAK,OAAO+K,MAAO,CAAE4C,MAAO,qBAC1C3N,KAAK,WACLsJ,YAAY,oBAIxB,oBAAMvB,KAAN,UACI,qBAAQ/H,KAAK,UAAU+a,SAAS,SAAS/V,UAAU,oBAAnD,mC,GAjFRmC,cA4Fd6T,GAAe,KAAKzR,OAAO,CAAE7G,KAAM,gBAApB,CAAsC+X,IAC5CrT,gBACX,SAAAtH,GAAK,MAAK,CAAEd,KAAMc,EAAMd,QACxB,CAAE4b,MzBtEe,SAACtZ,EAAUC,GAC5B,8CAAO,WAAM0Z,GAAN,mBAAAlV,EAAA,sEACkB1E,EAASC,EAAUC,GADrC,OAEmB,KADhBiJ,EADH,QAEQhI,QACDxD,EAAOwL,EAAOvK,KACpBgb,EAAS9V,GAAYnG,IAErBF,EAAaC,SAASC,KAEhBqG,EAAMmF,EAAOnF,IACnB4V,EAAS7V,GAAWC,KATrB,2CAAP,wDyBmEW+B,CAGb4T,ICrGmBE,G,4JAEjB,WACI,OACI,eAAC,IAAD,UACI,gBAAC,IAAD,WACI,eAAC,IAAD,CAAOjV,KAAK,SAAS6Q,UAAW2D,KAChC,eAAC,IAAD,CAAOxU,KAAK,IAAI6Q,UAAWwD,c,GAPdnT,aCIjCgU,IAASjR,OACL,eAAC,IAAD,CAAUjL,MAAOA,EAAjB,SACI,eAAC,GAAD,MAGJmc,SAASC,eAAe,W","file":"static/js/main.b9a6e297.chunk.js","sourcesContent":["import store from 'store'\n\nconst USER_KEY = 'user_key'\n\nconst storageUtils = {\n    // 保存user\n    saveUser(user) {\n        // localStorage.setItem(USER_KEY,JSON.stringify(user))\n        store.set(USER_KEY, user)\n    },\n    // 读取user,为避免返回一个undefined，当没有值时返回一个空对象\n    getUser() {\n        // return JSON.parse(localStorage.getItem(USER_KEY) || '{}')\n        return store.get(USER_KEY) || {}\n    },\n    // 删除user\n    removeUser() {\n        // localStorage.removeItem(USER_KEY)\n        store.remove(USER_KEY)\n    }\n}\nexport default storageUtils","/*\n包含多个action的type常量变签名称\n */\n\nexport const SET_HEAD_TITLE = 'set_head_title'  //设置头部\nexport const RECEIVE_USER = 'receive_user'  //接收user\nexport const SHOW_ERR_MSG = 'show_err_msg'  //显示登陆错误信息\nexport const RESET_USER = 'reset_user'  //退出登陆重置user\n\n","/*\n * @Descripttion: \n * @version: \n * @@Company: \n * @Author: FY01\n * @Date: 2022-02-19 10:23:47\n * @LastEditors: \n * @LastEditTime: 2022-02-19 10:32:26\n */\n/*\n根据旧的state和指定的action返回新的state\n */\nimport { combineReducers } from \"redux\";\n\nimport storageUtils from \"../utils/storageUtils\";\nimport {\n    SET_HEAD_TITLE,\n    RECEIVE_USER,\n    SHOW_ERR_MSG,\n    RESET_USER\n} from './actionTypes'\n\n//用来管理头部标题的reducer\nconst initHeaderTitle = '首页'\nfunction headerTitle(state = initHeaderTitle, action) {\n    switch (action.type) {\n        case SET_HEAD_TITLE:\n            return action.data\n        default:\n            return state\n    }\n}\n\n//用来管理当前登陆user的reducer\nconst initUser = storageUtils.getUser()\nfunction user(state = initUser, action) {\n    switch (action.type) {\n        case RECEIVE_USER:\n            return action.data\n        case SHOW_ERR_MSG:\n            const errMsg = action.data\n            return { ...state, errMsg }\n        case RESET_USER:\n            storageUtils.removeUser()\n            return action.data\n        default:\n            return state\n    }\n}\n\n/*\n向外暴露的是的总的reducer格式为，值为掉调用调用对应的reducer产生的值\n{\n    headerTitle,\n    user\n}\n */\nexport default combineReducers({\n    headerTitle,\n    user\n})","/*\n * @Descripttion: \n * @version: \n * @@Company: \n * @Author: FY01\n * @Date: 2022-02-19 10:23:47\n * @LastEditors: Please set LastEditors\n * @LastEditTime: 2022-02-19 11:37:17\n */\n/*\nredux 核心管理对象 store\n */\nimport { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { composeWithDevTools } from 'redux-devtools-extension'\n\nimport reducer from './reducer'\n\nexport default createStore(reducer, composeWithDevTools(applyMiddleware(thunk)))","/*\n * @Descripttion: \n * @version: \n * @@Company: \n * @Author: FY01\n * @Date: 2021-06-29 17:05:27\n * @LastEditors: \n * @LastEditTime: 2022-02-19 10:29:28\n */\n/*\n能发送异步ajax请求的函数模块\n封装axios库\n函数的返回值是promise对象\n1. 优化1: 统一处理请求异常?\n    在外层包一个自己创建的promise对象\n    在请求出错时, 不reject(error), 而是显示错误提示\n2. 优化2: 异步得到不是response, 而是response.data\n   在请求成功resolve时: resolve(response.data)\n */\n\nimport axios from \"axios\";\nimport { message } from 'antd'\n\nexport default function ajax(url, data = {}, type = 'GET') {\n    return new Promise(((resolve, reject) => {\n        let promise\n        // 1. 执行异步ajax请求\n        if (type === 'GET') {\n            promise = axios.get(url, { params: data })\n        } else {\n            promise = axios.post(url, data)\n        }\n        // 2. 如果成功了, 调用resolve(value)\n        promise.then(response => {\n            resolve(response.data)\n            // 3. 如果失败了, 不调用reject(reason), 而是提示异常信息\n        }).catch((error) => {\n            message.error('请求失败了：', error)\n        })\n    }))\n\n\n}","/*\n要求: 能根据接口文档定义接口请求\n包含应用中所有接口请求函数的模块\n每个函数的返回值都是promise\n\n基本要求: 能根据接口文档定义接口请求函数\n */\n\n\nimport ajax from \"./ajax\";\nimport jsonp from 'jsonp'\nimport { message } from \"antd\";\n\nconst BASE = ''\n// 请求登陆\nexport const reqLogin = (username, password) => ajax(BASE + '/login', { username, password }, 'POST')\n\n// 获取一级/二级分类的列表\nexport const reqCategories = (parentId) => ajax(BASE + '/manage/category/list', { parentId })\n\n// 添加分类\nexport const reqAddCategory = (categoryName, parentId) => ajax(BASE + '/manage/category/add', { categoryName, parentId }, 'POST')\n\n// 更新分类\nexport const reqUpdateCategory = ({ categoryId, categoryName }) => ajax(BASE + '/manage/category/update', { categoryId, categoryName }, 'POST')\n\n// 请求商品列表\n// searchType：搜索的类型：productName、productDesc\nexport const reqProducts = (pageNum, pageSize) => ajax(BASE + '/manage/product/list', { pageNum, pageSize })\n\n// 请求搜索商品分页列表\n// searchType 搜索的类型：productName、productDesc\nexport const reqSearchProducts = ({ pageNum, pageSize, searchName, searchType }) => ajax(BASE + '/manage/product/search',\n    {\n        pageNum,\n        pageSize,\n        //加[]表示不是searchType字符串，而是实参searchType\n        [searchType]: searchName\n    })\n// 请求获取一级、二级分类的列表\nexport const reqCategory = (categoryId) => ajax(BASE + '/manage/category/info', { categoryId })\n//请求更新状态，对产品进行上架、下架处理\n//上架：1，下架：2\nexport const reqUpdateStatus = (productId, status) => ajax(BASE + '/manage/product/updateStatus', { productId, status }, 'POST')\n\n//请求删除图片\nexport const reqDeleteImg = (name) => ajax(BASE + \"/manage/img/delete\", { name }, 'POST')\n\n//请求增加/更新商品\nexport const reqAddOrUpdateProduct = (product) => ajax(BASE + '/manage/product/' + (product._id ? 'update' : 'add'), product, 'POST')\n\n//请求获取所有角色列表\nexport const reqRoles = () => ajax(BASE + '/manage/role/list')\n\n//请求增加角色\nexport const reqAddRole = (roleName) => ajax(BASE + '/manage/role/add', { roleName }, 'POST')\n//更新角色(给角色设置权限)\nexport const reqUpdateRole = (role) => ajax(BASE + '/manage/role/update', role, 'POST')\n\n//请求所有用户列表\nexport const reqUsers = () => ajax(BASE + '/manage/user/list', 'GET')\n\n//请求删除用户\nexport const reqDeleteUser = (userId) => ajax(BASE + '/manage/user/delete', { userId }, 'POST')\n\n// 请求增加、更新用户\nexport const reqAddUpdateUser = (user) => ajax(BASE + '/manage/user/' + (user._id ? 'update' : 'add'), user, 'POST')\n\n\n//请求天气预报，json请求接口请求函数\nexport const reqWeather = (city) => {\n    //必须返回一个promise\n    return new Promise(((resolve, reject) => {\n        jsonp(`http://api.map.baidu.com/telematics/v3/weather?location=${city}&ou tput=json&ak=3p49MVra6urFRGOT9s8UBWr2`,\n            {},\n            (err, data) => {\n                if (!err && data.status === 'success') {\n                    // 取出需要的数据\n                    const { dayPictureUrl, weather } = data.results[0].weather_data[0]\n                    resolve({ dayPictureUrl, weather })\n                } else {\n                    message.error('请求天气失败')\n                }\n            })\n    }))\n}","/*\n * @Descripttion: \n * @version: \n * @@Company: \n * @Author: FY01\n * @Date: 2021-07-06 22:03:55\n * @LastEditors: \n * @LastEditTime: 2022-02-19 10:32:37\n */\n\n/*\n格式化日期工具模块\n */\nexport function formatDateUtils(time) {\n    if (!time) return ''\n    const date = new Date(time)\n    // return '2021-6-28 23:43:07'\n    if (date.getSeconds() >= 10)\n        return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`\n    else\n        return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:0${date.getSeconds()}`\n\n\n}\n","const menuList = [\n    {\n        title: '首页', // 菜单标题名称\n        key: '/home', // 对应的path\n        icon: 'home', // 图标名称\n        isPublic: true, // 公开的,任何用户都可以访问\n    },\n    {\n        title: '商品',\n        key: '/products',\n        icon: 'appstore',\n        children: [ // 子菜单列表\n            {\n                title: '品类管理',\n                key: '/category',\n                icon: 'bars'\n            },\n            {\n                title: '商品管理',\n                key: '/product',\n                icon: 'tool'\n            },\n        ]\n    },\n\n    {\n        title: '用户管理',\n        key: '/user',\n        icon: 'user'\n    },\n    {\n        title: '角色管理',\n        key: '/role',\n        icon: 'safety',\n    },\n\n    {\n        title: '图形图表',\n        key: '/charts',\n        icon: 'area-chart',\n        children: [\n            {\n                title: '柱形图',\n                key: '/charts/bar',\n                icon: 'bar-chart'\n            },\n            {\n                title: '折线图',\n                key: '/charts/line',\n                icon: 'line-chart'\n            },\n            {\n                title: '饼图',\n                key: '/charts/pie',\n                icon: 'pie-chart'\n            },\n        ]\n    },\n\n    {\n        title: '订单管理',\n        key: '/order',\n        icon: 'windows',\n    },\n]\n\nexport default menuList","import React from 'react';\nimport './index.less'\n// 链接按钮组件，用于替代不需要超链接功能的a标签\nexport default function LinkButton(props) {\n    return (\n        <button {...props} className={'link-button'}>\n        </button>\n    )\n}\n\n","/*\n * @Descripttion: \n * @version: \n * @@Company: \n * @Author: FY01\n * @Date: 2022-02-19 10:23:47\n * @LastEditors: \n * @LastEditTime: 2022-02-19 10:32:20\n */\n/*\n包含多个action creator的函数模块\n同步action：返回对象\n异步action：返回函数，dispatch() => {}\n */\nimport {\n    SET_HEAD_TITLE,\n    RECEIVE_USER,\n    SHOW_ERR_MSG,\n    RESET_USER\n} from './actionTypes'\n\nimport { reqLogin } from \"../api\";\nimport storageUtils from \"../utils/storageUtils\";\n\n\n//设置头部标题的action\nexport const setHeadTitle = (headTitle) => ({ type: SET_HEAD_TITLE, data: headTitle })\n\n//保存user的同步action\nexport const receiveUser = (user) => ({ type: RECEIVE_USER, data: user })\n\n//显示登陆错误信息的同步action\nexport const showErrMsg = (msg) => ({ type: SHOW_ERR_MSG, data: msg })\n\n//登陆的异步action\nexport const login = (username, password) => {\n    return async dispatch => {\n        const result = await reqLogin(username, password)\n        if (result.status === 0) {  //分发登陆成功的同步action\n            const user = result.data\n            dispatch(receiveUser(user))\n            //并且保存到local中\n            storageUtils.saveUser(user)\n        } else { //分发登陆失败的同步action\n            const msg = result.msg\n            dispatch(showErrMsg(msg))\n        }\n    }\n}\n\n//退出登陆的同步action\nexport const logout = () => ({ type: RESET_USER, data: {} })","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom'\nimport { Modal } from 'antd'\nimport { connect } from \"react-redux\";\n\n// 头部\nimport './index.less'\nimport { reqWeather } from '../../api/index'\nimport { formatDateUtils } from '../../utils/formatDateUtils'\nimport menuList from \"../../config/manuConfig\";\nimport LinkButton from \"../linkButton\";\nimport { logout } from \"../../redux/actions\";\n\nclass Header extends Component {\n    state = {\n        //当前时间\n        currentTime: formatDateUtils(Date.now()),\n        // 天气图片的url\n        dayPictureUrl: '',\n        // 天气文字\n        weather: '',\n    }\n    // 组件完成挂载，开始更新时间，发送ajax请求获取天气状态\n    componentDidMount() {\n        this.getTime()\n        this.getWeather()\n    }\n    getTime = () => {\n        this.setIntervalId = setInterval(() => {\n            const currentTime = formatDateUtils(Date.now())\n            this.setState({ currentTime })\n        }, 1000)\n    }\n    getWeather = async () => {\n        const { dayPictureUrl, weather } = await reqWeather('广州')\n        this.setState({ dayPictureUrl, weather })\n    }\n    //根据当前路径拿到组件的title\n    getTitle = () => {\n        const path = this.props.location.pathname\n        let title = ''\n        menuList.forEach(item => {\n            // 如果当前item对象的key与path一样,item的title就是需要显示的title\n            if (item.key === path) {\n                title = item.title\n            } else if (item.children) {\n                // 在所有子item中查找匹配的(不用完全匹配，完全匹配会导致切换组件的子组件无法显示)\n                const cItem = item.children.find(cItem => path.indexOf(cItem.key) === 0)\n                if (cItem) {\n                    // 取出它的title\n                    title = cItem.title\n                }\n            }\n        })\n        return title\n    }\n\n    logout = (event) => {\n        event.preventDefault()\n        Modal.confirm({\n            content: `确认退出${this.props.user.username}吗？`,\n            // 这里必须写箭头函数，否则this指向不正确\n            onOk: () => {\n                // 退出登陆\n                this.props.logout()\n\n            }\n        })\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.setIntervalId)\n    }\n\n    render() {\n        //TODO: 百度天气预报接口有问题，未解决\n        // 从内存拿到当前用户名\n        const username = this.props.user.username\n        // 从状态中获取天气状态\n        const { currentTime, dayPictureUrl, weather } = this.state\n        // const {currentTime} = this.state\n\n        //根据当前路径拿到需要显示的title\n        // const title = this.getTitle()\n\n        //redux管理\n        const title = this.props.headerTitle\n\n        return (\n            <div className={'header'}>\n                <div className=\"header-top\">\n                    <span>欢迎，{username}</span>\n                    <LinkButton onClick={this.logout}>\n                        退出\n                    </LinkButton>\n                </div>\n                <div className=\"header-bottom\">\n                    <div className=\"header-bottom-left\">{title}</div>\n                    <div className=\"header-bottom-right\">\n                        <span>{currentTime}</span>\n                        <img src={dayPictureUrl} alt=\"weather\" />\n                        <span>{weather}</span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default connect(\n    state => ({ headerTitle: state.headerTitle, user: state.user }),\n    { logout }\n)(withRouter(Header))\n\n","export default \"data:image/png;base64,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\"","// 左侧导航条\nimport React, { Component } from 'react';\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Menu, Icon } from 'antd';\nimport { connect } from \"react-redux\";\nimport PropTypes from 'prop-types'\n\nimport './index.less'\nimport logo from '../../assets/images/logo.png'\nimport menuList from \"../../config/manuConfig\";\nimport { setHeadTitle } from \"../../redux/actions\";\n\nconst { SubMenu } = Menu;\n\nclass LeftNav extends Component {\n    static propTypes = {\n        setHeadTitle: PropTypes.func.isRequired,\n        user: PropTypes.object.isRequired\n    }\n\n    // reduce(),和递归组合\n\n    shouldShow = (item) => {\n        /*\n        1.用户是admin，应该显示组件，所有返回true\n        2.组件是公开的（isPublic），应该对所有用户显示\n        3.item的key值（路径）在用户的role的menus中找到，应该返回true\n        4.如果当前用户有item的子item的权限\n         */\n        const key = item.key\n        const { role, username } = this.props.user\n        const menus = role.menus\n        if (username === 'admin' || item.isPublic || menus.indexOf(key) !== -1) {\n            return true\n        } else if (item.children) {\n            // 4.如果当前用户有item的子item的权限\n            return !!item.children.find(cItem => menus.indexOf(cItem.key) !== -1)\n        } else {\n            return false\n        }\n    }\n\n    getMenuListReduce = (menuList) => {\n        //先把当前被选中组件的路径拿到\n        let path = this.props.location.pathname\n\n        return menuList.reduce((pre, item) => {\n            //判断每个user应该显示那些组件\n            if (this.shouldShow(item)) {\n\n                if (!item.children) {\n                    // 判断是否是当前对应的item，\n                    if (item.key === path || path.indexOf(item.key) === 0) {\n                        //如果是则更新当前redux的headTitle状态\n                        this.props.setHeadTitle(item.title)\n                    }\n                    pre.push((\n                        <Menu.Item key={item.key} onClick={() => { this.props.setHeadTitle(item.title) }}>\n                            <Link to={item.key}>\n                                <Icon type={item.icon} />\n                                <span>{item.title}</span>\n                            </Link>\n                        </Menu.Item>\n                    ))\n                } else {\n                    //如果子菜单的路径跟被选中的菜单一致，则这个父菜单需要被打开状态(不需要完全一致，因为切换到父菜单的子路由组件时，父菜单也需要被打开)\n                    const cItem = item.children.find(cItem => path.indexOf(cItem.key) === 0)\n                    //拿到这个父菜单的path\n                    if (cItem) {\n                        this.openKey = item.key\n                    }\n\n                    pre.push((\n                        <SubMenu\n                            key={item.key}\n                            title={\n                                <span>\n                                    <Icon type={item.icon} />\n                                    <span>{item.title}</span>\n                                </span>\n                            }\n                        >\n                            {this.getMenuListReduce(item.children)}\n                        </SubMenu>\n                    ))\n                }\n            }\n            return pre\n        }, [])\n    }\n    //在render之前就要把需要渲染的菜单数据拿到\n    UNSAFE_componentWillMount() {\n        this.menuNodes = this.getMenuListReduce(menuList)\n    }\n\n    render() {\n        let path = this.props.location.pathname\n\n        // 解决切换product的子组件，左侧导航条没有被选上的bug\n        if (path.indexOf('/product') === 0) {\n            path = '/product'\n        }\n        return (\n            <div className={'left-nav'}>\n                <Link to='/' className=\"left-nav-header\">\n                    <img src={logo} alt=\"\" />\n                    <h1>后台管理</h1>\n                </Link>\n                <Menu\n                    // defaultSelectedKeys只在第一次render有效，但页面第一次加载render了两次，导致第一次的home导航条没有被选中\n                    // defaultSelectedKeys={[path]}\n                    selectedKeys={[path]}\n                    // 如果二级菜单有被选中的，父菜单刷新之后需要打开\n                    defaultOpenKeys={[this.openKey]}\n\n                    mode=\"inline\"\n                    theme=\"dark\"\n                >\n                    {\n                        this.menuNodes\n                    }\n                </Menu>\n            </div>\n        );\n    }\n}\n\n/*\nwithRouter 是一个高阶组件，接收一个非路由组件，返回一个新的路由组件，\n新的组件向非路由组件传递三个参数：history，location，match\n */\nexport default connect(\n    state => ({ user: state.user }),\n    { setHeadTitle }\n)(withRouter(LeftNav))\n","import React, { Component } from 'react';\nimport { Form, Select, Input } from \"antd\";\nimport PropTypes from 'prop-types'\n/*\n添加分类的组件\n */\n\nconst Item = Form.Item\nconst Option = Select.Option\n\n\nclass AddForm extends Component {\n    static propTypes = {\n        parentId: PropTypes.string.isRequired,\n        categories: PropTypes.array.isRequired,\n        setForm: PropTypes.func.isRequired\n    }\n    // 传递from对象给父组件\n    UNSAFE_componentWillMount() {\n        this.props.setForm(this.props.form)\n    }\n    render() {\n        const { getFieldDecorator } = this.props.form\n        const { parentId, categories } = this.props\n        return (\n            <Form>\n                <Item>\n                    {\n                        getFieldDecorator('parentId', {\n                            initialValue: parentId\n                        })(\n                            <Select>\n                                <Option value='0'>一级分类</Option>\n                                {\n                                    categories.map(c => <Option value={c._id} key={c._id}>{c.name}</Option>)\n                                }\n                            </Select>\n                        )\n                    }\n                </Item>\n                <Item>\n                    {getFieldDecorator('categoryName', {// 配置对象: 属性名是特定的一些名称\n                        initialValue: '',\n                        rules: [\n                            { required: true, whitespace: true, message: '分类名称不能为空!' },\n                            { min: 2, message: '分类名称最少1位,最多8位!' },\n                            { max: 8, message: '分类名称最少1位,最多8位!' },\n                            // { pattern: /^[a-zA-Z0-9_]+$/, message: '分类名称只能是字母数字和下划线！' }\n                        ]\n                    })(\n                        <Input placeholder={'请输入分类名称'}>\n                        </Input>\n                    )}\n\n                </Item>\n            </Form>\n        );\n    }\n}\nexport default Form.create()(AddForm)\n","import React, { Component } from 'react';\nimport { Form, Input } from \"antd\";\nimport PropTypes from 'prop-types'\n/*\n修改分类的组件\n */\n\nconst Item = Form.Item\n\nclass UpdateForm extends Component {\n    // 对接收到的props进行一定限制\n    static propTypes = {\n        categoryName: PropTypes.string.isRequired,\n        setForm: PropTypes.func.isRequired\n    }\n    // 传递from对象给父组件\n    UNSAFE_componentWillMount() {\n        this.props.setForm(this.props.form)\n    }\n\n    render() {\n        const { getFieldDecorator } = this.props.form\n        const { categoryName } = this.props\n        return (\n            <Form>\n                <Item>\n                    {getFieldDecorator('categoryName', {\n                        //默认值通过props由父组件传入\n                        initialValue: categoryName,\n                        rules: [\n                            { required: true, whitespace: true, message: '分类名称不能为空!' },\n                            { min: 1, message: '分类名称最少1位,最多8位!' },\n                            { max: 8, message: '分类名称最少1位,最多8位!' },\n                            // { pattern: /^[a-zA-Z0-9_]+$/, message: '分类名称只能是字母数字和下划线！' }\n                        ]\n                    })(\n                        <Input placeholder={'请输入分类名称'} >\n                        </Input>\n                    )}\n                </Item>\n            </Form>\n        );\n    }\n}\nexport default Form.create()(UpdateForm)\n","import React, { Component } from 'react';\n/*\n品类管理路由\n */\nimport {\n    Card,\n    Table,\n    Button,\n    Icon,\n    message,\n    Modal\n} from 'antd'\nimport LinkButton from \"../../components/linkButton\";\nimport { reqCategories, reqUpdateCategory, reqAddCategory } from \"../../api\";\nimport AddForm from \"./AddForm\";\nimport UpdateForm from \"./UpdateForm\";\n\nexport default class Categories extends Component {\n\n    state = {\n        categories: [],  //一级分类列表\n        subCategories: [], //二级分类列表\n        parentId: '0', // 当前需要显示的父级菜单的id\n        parentName: '', // 当前需要显示的父级菜单的名称\n        isLoading: false,  //是否正在获取一级列表中\n        showStatus: 0   //添加、修改的对话框显示状态：0：都不显示，1：显示添加，2：显示修改\n    }\n\n    // 初始化table所有列的数组\n    initColumns = () => {\n        this.columns = [\n            {\n                title: '分类的名称',\n                dataIndex: 'name'\n            },\n            {\n                title: '操作',\n                width: 300, // 控制列的大小，默认单位px\n                dataIndex: '',\n                key: 'x',\n                // 这里的render函数可以传递一个参数代表当前列\n                render: (category) => (\n                    <span>\n                        <LinkButton onClick={() => { this.showUpdateCategoryModal(category) }}>修改分类</LinkButton>\n                        {/*点击显示二级列表，\n                        向事件回调函数传递参数：先定义一个匿名函数，在函数调用处理的函数并传入数据*/}\n                        {\n                            this.state.parentId === '0' ? <LinkButton onClick={() => { this.showSubCategories(category) }}>查看子分类</LinkButton> : null\n                        }\n\n                    </span>\n                )\n            },\n        ];\n    }\n    //显示二级列表,注意setState（）是异步操作，并不会马上更新状态，要把操作方法放在setState的回调函数里\n    showSubCategories = (category) => {\n        this.setState({\n            parentId: category._id,\n            parentName: category.name\n        }, () => {\n            //    回调函数在状态更新且render后执行\n            this.getCategories()\n\n        })\n        // console.log(this.state.parentId)  这里的状态还没有更新\n    }\n\n    //回到一级菜单\n    showSupCategory = () => {\n        this.setState({\n            parentId: '0',\n            parentName: '',\n            subCategories: []\n        })\n    }\n\n    //获取所有一级、二级分类列表\n    getCategories = async (parentId) => {\n        // 在请求前，isLoading未完成\n        this.setState({ isLoading: true })\n        // 调用传参，parentID为实参，否则为状态里的parentId\n        parentId = parentId || this.state.parentId\n        const result = await reqCategories(parentId)\n\n        // 在请求后，isLoading完成\n        this.setState({ isLoading: false })\n\n        if (result.status === 0) {\n            //获取到分类列表\n            const categories = result.data\n            //如果parentID为0，更新一级列表\n            if (parentId === '0') {\n                this.setState({ categories })\n            } else {\n                // 否则更新二级列表\n                this.setState({ subCategories: categories })\n            }\n        } else {\n            message.error('获取一级列表失败')\n        }\n    }\n\n    // 显示添加对话框\n    showAddCategoryModal = () => {\n        this.setState({\n            showStatus: 1\n        })\n    }\n    // 显示更新修改对话框\n    showUpdateCategoryModal = (category) => {\n        this.category = category  //把当前点击的分类保存起来\n        this.setState({\n            showStatus: 2\n        })\n    }\n    //取消显示对话框\n    handleCancel = () => {\n        this.setState({\n            showStatus: 0\n        })\n        // 清除输入框数据\n        this.form.resetFields()\n    }\n\n    //添加分类\n    addCategory = () => {\n        //给表单做提交前统一验证，验证通过才发请求\n        this.form.validateFields(async (err, value) => {\n            if (!err) {\n                //1.隐藏修改更新对话框\n                this.setState({\n                    showStatus: 0\n                })\n                //2.收集表单数据，并发请求增加添加分类\n                // const {parentId,categoryName} =this.form.getFieldsValue()\n                // 也可以从value里取\n                const { parentId, categoryName } = value\n                const result = await reqAddCategory(categoryName, parentId)\n                if (result.status === 0) {\n                    //如果添加的分类就是当前分类列表下的分类\n                    if (parentId === this.state.parentId) {\n                        // 3.重新显示分类菜单\n                        this.getCategories()\n                    } else if (parentId === '0') { //在二级分类列表下添加一级分类，重新获取一级分类列表，但不需要显示一级列表\n                        this.getCategories('0')\n                    }\n\n                }\n            }\n        })\n\n    }\n\n    // 更新修改分类\n    updateCategory = () => {\n        //给表单做提交前统一验证，验证通过才发请求\n        this.form.validateFields(async (err, value) => {\n            if (!err) {\n                //1.隐藏修改更新对话框\n                this.setState({\n                    showStatus: 0\n                })\n                // 准备数据\n                const categoryId = this.category._id\n                // const categoryName = this.form.getFieldValue('categoryName')\n                const { categoryName } = value\n                // 清除输入框数据\n                this.form.resetFields()\n                // 2.发请求跟新分类菜单\n                const result = await reqUpdateCategory({ categoryId, categoryName })\n                if (result.status === 0) {\n                    // 3.重新显示分类菜单\n                    this.getCategories()\n                }\n            }\n        })\n    }\n    // 为第一次render做数据准备\n    UNSAFE_componentWillMount() {\n        this.initColumns()\n    }\n    // 执行异步请求：发异步ajax请求获取分类列表\n    componentDidMount() {\n        // 获取一级分类列表\n        this.getCategories()\n    }\n\n    render() {\n        const { categories, isLoading, parentId, parentName, subCategories, showStatus } = this.state\n        const category = this.category || {}\n        // card的左侧\n        const title = parentId === '0' ? '一级分类列表' : (\n            <span>\n                <LinkButton onClick={this.showSupCategory}>一级分类列表</LinkButton>\n                <Icon type={'arrow-right'} style={{ marginRight: '5px' }} />\n                <span >{parentName}</span>\n            </span>\n        )\n        // card的右侧\n        const extra = (\n            <Button onClick={this.showAddCategoryModal} type={'primary'} >\n                <Icon type={'plus'} />\n                添加\n            </Button>)\n\n\n        return (\n            <Card title={title} extra={extra}>\n                <Table\n                    // 添加边框\n                    bordered={true}\n                    // 给每一行添加一个key\n                    rowKey={'_id'}\n                    //是否在一级列表没加载完之前显示loading图片\n                    loading={isLoading}\n                    dataSource={parentId === '0' ? categories : subCategories}\n                    columns={this.columns}\n                    //配置分页参数，和是否显示快速跳转页面\n                    pagination={{ defaultPageSize: 5, showQuickJumper: true }}\n                />\n                <Modal\n                    title=\"添加分类\"\n                    visible={showStatus === 1}\n                    onOk={this.addCategory}\n                    onCancel={this.handleCancel}\n                >\n                    <AddForm\n                        categories={categories}\n                        parentId={parentId}\n                        setForm={(form) => { this.form = form }}\n                    />\n                </Modal>\n\n                <Modal\n                    title=\"更新分类\"\n                    visible={showStatus === 2}\n                    onOk={this.updateCategory}\n                    onCancel={this.handleCancel}\n                >\n                    <UpdateForm categoryName={category.name} setForm={(form) => { this.form = form }} />\n                </Modal>\n            </Card>\n        );\n    }\n}\n\n","import React, { Component } from 'react'\nimport { Card, Button } from 'antd'\nimport ReactEcharts from 'echarts-for-react'\n\n/*\n后台管理的柱状图路由组件\n */\nexport default class Bar extends Component {\n\n    state = {\n        sales: [5, 20, 36, 10, 10, 20], // 销量的数组\n        stores: [6, 10, 25, 20, 15, 10], // 库存的数组\n    }\n\n    update = () => {\n        this.setState(state => ({\n            sales: state.sales.map(sale => sale + 1),\n            stores: state.stores.reduce((pre, store) => {\n                pre.push(store - 1)\n                return pre\n            }, []),\n        }))\n    }\n\n    /*\n    返回柱状图的配置对象\n     */\n    getOption = (sales, stores) => {\n        return {\n            title: {\n                text: '实时销量库存'\n            },\n            tooltip: {},\n            legend: {\n                data: ['销量', '库存']\n            },\n            xAxis: {\n                data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\n            },\n            yAxis: {},\n            series: [{\n                name: '销量',\n                type: 'bar',\n                data: sales\n            }, {\n                name: '库存',\n                type: 'bar',\n                data: stores\n            }]\n        }\n    }\n\n    render() {\n        const { sales, stores } = this.state\n        return (\n            <div>\n                <Card>\n                    <Button type='primary' onClick={this.update}>更新</Button>\n                </Card>\n\n                <Card title='柱状图一'>\n                    <ReactEcharts option={this.getOption(sales, stores)} />\n                </Card>\n\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport { Card, Button } from 'antd'\nimport ReactEcharts from 'echarts-for-react'\n\n/*\n后台管理的折线图路由组件\n */\nexport default class Line extends Component {\n\n    state = {\n        sales: [5, 20, 36, 10, 10, 20], // 销量的数组\n        stores: [6, 10, 25, 20, 15, 10], // 库存的数组\n    }\n\n    update = () => {\n        this.setState(state => ({\n            sales: state.sales.map(sale => sale + 1),\n            stores: state.stores.reduce((pre, store) => {\n                pre.push(store - 1)\n                return pre\n            }, []),\n        }))\n    }\n\n    /*\n    返回柱状图的配置对象\n     */\n    getOption = (sales, stores) => {\n        return {\n            title: {\n                text: '实时销量库存'\n            },\n            tooltip: {},\n            legend: {\n                data: ['销量', '库存']\n            },\n            xAxis: {\n                data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\n            },\n            yAxis: {},\n            series: [{\n                name: '销量',\n                type: 'line',\n                data: sales\n            }, {\n                name: '库存',\n                type: 'line',\n                data: stores\n            }]\n        }\n    }\n\n    render() {\n        const { sales, stores } = this.state\n        return (\n            <div>\n                <Card>\n                    <Button type='primary' onClick={this.update}>更新</Button>\n                </Card>\n\n                <Card title='折线图一'>\n                    <ReactEcharts option={this.getOption(sales, stores)} />\n                </Card>\n\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport { Card } from 'antd'\nimport ReactEcharts from 'echarts-for-react'\n\n/*\n后台管理的饼图路由组件\n */\nexport default class Pie extends Component {\n\n    getOption = () => {\n        return {\n            title: {\n                text: '站点用户访问来源',\n                subtext: '虚构数据',\n                x: 'center'\n            },\n            tooltip: {\n                trigger: 'item',\n                formatter: \"{a} <br/>{b} : {c} ({d}%)\"\n            },\n            legend: {\n                orient: 'vertical',\n                left: 'left',\n                data: ['直接访问', '邮件营销', '联盟广告', '视频广告', '搜索引擎']\n            },\n            series: [\n                {\n                    name: '访问来源',\n                    type: 'pie',\n                    radius: '55%',\n                    center: ['50%', '60%'],\n                    data: [\n                        { value: 335, name: '直接访问' },\n                        { value: 310, name: '邮件营销' },\n                        { value: 234, name: '联盟广告' },\n                        { value: 135, name: '视频广告' },\n                        { value: 1548, name: '搜索引擎' }\n                    ],\n                    itemStyle: {\n                        emphasis: {\n                            shadowBlur: 10,\n                            shadowOffsetX: 0,\n                            shadowColor: 'rgba(0, 0, 0, 0.5)'\n                        }\n                    }\n                }\n            ]\n        };\n\n    }\n\n    getOption2 = () => {\n        return {\n            backgroundColor: '#2c343c',\n\n            title: {\n                text: 'Customized Pie',\n                left: 'center',\n                top: 20,\n                textStyle: {\n                    color: '#ccc'\n                }\n            },\n\n            tooltip: {\n                trigger: 'item',\n                formatter: \"{a} <br/>{b} : {c} ({d}%)\"\n            },\n\n            visualMap: {\n                show: false,\n                min: 80,\n                max: 600,\n                inRange: {\n                    colorLightness: [0, 1]\n                }\n            },\n            series: [\n                {\n                    name: '访问来源',\n                    type: 'pie',\n                    radius: '55%',\n                    center: ['50%', '50%'],\n                    data: [\n                        { value: 335, name: '直接访问' },\n                        { value: 310, name: '邮件营销' },\n                        { value: 274, name: '联盟广告' },\n                        { value: 235, name: '视频广告' },\n                        { value: 400, name: '搜索引擎' }\n                    ].sort(function (a, b) { return a.value - b.value; }),\n                    roseType: 'radius',\n                    label: {\n                        normal: {\n                            textStyle: {\n                                color: 'rgba(255, 255, 255, 0.3)'\n                            }\n                        }\n                    },\n                    labelLine: {\n                        normal: {\n                            lineStyle: {\n                                color: 'rgba(255, 255, 255, 0.3)'\n                            },\n                            smooth: 0.2,\n                            length: 10,\n                            length2: 20\n                        }\n                    },\n                    itemStyle: {\n                        normal: {\n                            color: '#c23531',\n                            shadowBlur: 200,\n                            shadowColor: 'rgba(0, 0, 0, 0.5)'\n                        }\n                    },\n\n                    animationType: 'scale',\n                    animationEasing: 'elasticOut',\n                    animationDelay: function (idx) {\n                        return Math.random() * 200;\n                    }\n                }\n            ]\n        };\n    }\n\n    render() {\n        return (\n            <div>\n                <Card title='饼图一'>\n                    <ReactEcharts option={this.getOption()} style={{ height: 300 }} />\n                </Card>\n                <Card title='饼图二'>\n                    <ReactEcharts option={this.getOption2()} style={{ height: 300 }} />\n                </Card>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react';\n/*\n首页路由\n */\nimport './home.less'\n\nexport default class Home extends Component {\n    render() {\n        return (\n            <div className={'home'}>\n                欢迎来到React后台管理\n            </div>\n        );\n    }\n}\n\n","/*\n配置常量\n */\n\n// 商品页每页显示的数量\nexport const PAGE_SIZE = 3\nexport const BASE_IMG_URL = \"http://localhost:5000/upload/\"","import React, { Component } from 'react';\nimport {\n    Card,\n    Select,\n    Button,\n    Table,\n    Icon,\n    Input\n} from 'antd'\nimport LinkButton from \"../../components/linkButton\";\nimport { reqProducts, reqSearchProducts, reqUpdateStatus } from \"../../api\";\nimport { PAGE_SIZE } from '../../utils/constant'\n/*\n商品管理路由主界面\n */\nconst Option = Select.Option\n\nexport default class ProductHome extends Component {\n    state = {\n        isLoading: false,\n        total: 0,  //商品的总数量\n        products: [], //商品的数组\n        searchName: '',//搜索的名字\n        searchType: 'productName',    //搜索的类型：productName、productDesc\n    }\n\n    // 初始化列的标签\n    initColumns = () => {\n        this.columns = [\n            {\n                title: '商品名称',\n                dataIndex: 'name',\n            },\n            {\n                title: '商品描述',\n                dataIndex: 'desc',\n            },\n            {\n                title: '价格',\n                width: 100,\n                dataIndex: 'price',\n                render: (price) => {\n                    return '￥' + price  // 当前指定了对应的属性, 传入的是对应的属性值\n                }\n            },\n            {\n                title: '状态',\n                width: 100,\n                // dataIndex: 'status',\n                render: (product) => {\n                    const { status, _id } = product\n                    return (\n                        <span>\n                            <Button\n                                type={'primary'}\n                                onClick={() => { this.updateStatus(_id, status === 1 ? 2 : 1) }}\n                            >\n                                {status === 1 ? '下架' : '上架'}\n                            </Button>\n                            <span>{status === 1 ? '在售' : '已下架'}</span>\n                        </span>\n                    )\n                }\n            },\n            {\n                title: '操作',\n                width: 100,\n                // dataIndex: '',\n                render: (product) => {\n                    // console.log(product)\n                    return (\n                        <span>\n                            {/*将product对象通过state传递个目标路由组件*/}\n                            <LinkButton onClick={() => { this.goToProductDetails(product) }}>详情</LinkButton>\n                            <LinkButton onClick={() => { this.props.history.push('/product/addUpdate', product) }}>修改</LinkButton>\n                        </span>\n                    )\n                }\n            }\n        ];\n    }\n\n    // 更新上架下架状态\n    updateStatus = async (productId, status) => {\n        const result = await reqUpdateStatus(productId, status)\n        if (result.status === 0) {\n            // message.success('更新状态成功')\n            // 重新获取商品列表\n            this.getProducts(this.pageNum)\n        }\n    }\n\n    //跳转到详情页\n    goToProductDetails = (product) => {\n        this.props.history.push('/product/details', { product })\n    }\n\n    // 获取商品数据列表\n    getProducts = async (pageNum, pageSize = PAGE_SIZE) => {\n        this.setState({ isLoading: true })\n        this.pageNum = pageNum\n        const { searchName, searchType } = this.state\n\n        let result\n\n\n\n        if (searchName !== '') {\n            // 如果searchName 不为空，发搜索商品搜索请求\n            result = await reqSearchProducts({\n                pageNum, pageSize, searchName, searchType\n            })\n        } else {\n            // 如果searchName为空，发一般商品列表请求\n            result = await reqProducts(pageNum, pageSize)\n        }\n\n        this.setState({ isLoading: false })\n        //取出分页数据，显示分页列表\n        if (result.status === 0) {\n            const { total, list } = result.data\n            this.setState({\n                total,\n                products: list\n            })\n        }\n    }\n\n    UNSAFE_componentWillMount() {\n        this.initColumns(1)\n    }\n    componentDidMount() {\n        //组件完成挂载，即获取商品列表，默认页码1，每页3个数据\n        this.getProducts(1)\n    }\n\n    render() {\n        const { products, total, isLoading, searchName, searchType } = this.state\n        const title = (\n            <span>\n                <Select\n                    value={searchType}\n                    style={{ width: 150 }}\n                    //获取搜索类型\n                    onChange={value => this.setState({ searchType: value })}\n                >\n                    <Option value='productName'>按名称搜索</Option>\n                    <Option value='productDesc'>按描述搜索</Option>\n                </Select>\n                <Input\n                    placeholder='关键字'\n                    style={{ width: 150, marginRight: 15, marginLeft: 15 }}\n                    value={searchName}\n                    //获取搜索类型\n                    onChange={event => this.setState({ searchName: event.target.value })}\n                />\n                <Button type={'primary'} onClick={() => { this.getProducts(1) }}>\n                    搜索\n                </Button>\n            </span>\n        )\n        const extra = (\n            <Button type={'primary'} onClick={() => this.props.history.push('/product/addUpdate')}>\n                <Icon type={'plus'} />\n                添加商品\n            </Button>\n        )\n\n        return (\n            <Card title={title} extra={extra}>\n                <Table\n                    bordered\n                    loading={isLoading}\n                    rowKey='_id'\n                    dataSource={products}\n                    columns={this.columns}\n                    pagination={{\n                        current: this.pageNum,  //显示当前页\n                        defaultPageSize: PAGE_SIZE,\n                        showQuickJumper: true,\n                        total,\n                        //当页码发生改变时调用回调函数，接收两个参数（改变后的页码page，pageSize）\n                        // onChange: (pageNum) => { this.getProducts(pageNum)}\n                        onChange: this.getProducts  //简写形式，当实参和形参一致时\n                    }}\n                />\n            </Card>\n        )\n    }\n}\n\n\n","import React, { Component } from 'react';\n/*\n商品详情页\n */\nimport {\n    Card,\n    List,\n    Icon\n} from 'antd'\nimport LinkButton from \"../../components/linkButton\";\nimport { BASE_IMG_URL } from \"../../utils/constant\";\nimport { reqCategory } from '../../api'\n\nconst Item = List.Item\nexport default class ProductDetails extends Component {\n\n    state = {\n        firstCategory: '一级分类',   //一级分类名称\n        secondCategory: ''   //二级分类名称\n    }\n\n    //回到ProductHome\n    goBackProductHome = () => {\n        this.props.history.goBack()\n    }\n\n    //获取一级、二级分类名称\n    getCategory = async () => {\n        const { categoryId, pCategoryId } = this.props.location.state.product\n        // console.log(categoryId,typeof categoryId)\n        if (pCategoryId === '0') {\n            const result = await reqCategory(categoryId)\n            let firstCategory = result.data.name\n            this.setState({ firstCategory })\n        } else {\n\n            /* 一个await是在前一个请求成功接收到请求再发的，效率低\n            const result1 = await reqCategory(pCategoryId) //获取一级分类名称\n            const result2 = await reqCategory(categoryId) //获取二级分类名称\n            let firstCategory = result1.data.name\n            let secondCategory = result2.data.name\n            this.setState({firstCategory,secondCategory})\n             */\n            //一次性发送多请求，只有都成功了，再正常处理\n            const results = await Promise.all([reqCategory(pCategoryId), reqCategory(categoryId)])\n            let firstCategory = results[0].data.name\n            let secondCategory = results[1].data.name\n            this.setState({ firstCategory, secondCategory })\n        }\n    }\n    componentDidMount() {\n        this.getCategory()\n    }\n\n    render() {\n        //从home组件传过来的state中取出数据\n        const { firstCategory, secondCategory } = this.state\n        const { name, desc, price, detail, imgs } = this.props.location.state.product\n\n        const title = (\n            <span>\n                <LinkButton>\n                    <Icon type='arrow-left' style={{ marginRight: 10, fontSize: 20 }} onClick={this.goBackProductHome} />\n                </LinkButton>\n                <span>商品详情</span>\n            </span>\n        )\n        return (\n            <Card\n                title={title}\n                className={'product-details'}\n            >\n                <List>\n                    <Item>\n                        <span className={'product-details-left'}>商品名称：</span>\n                        <span>{name}</span>\n                    </Item>\n                    <Item>\n                        <span className={'product-details-left'}>商品描述：</span>\n                        <span>{desc}</span>\n                    </Item>\n                    <Item>\n                        <span className={'product-details-left'}>商品价格：</span>\n                        <span>{price}元</span>\n                    </Item>\n                    <Item>\n                        <span className={'product-details-left'}>所属分类：</span>\n                        <span>{firstCategory}{secondCategory ? '-->' + secondCategory : ''}</span>\n                    </Item>\n                    <Item>\n                        <span className={'product-details-left'}>商品图片：</span>\n                        <span>\n                            {imgs.map((img) => {\n                                return (<img\n                                    key={img}\n                                    src={BASE_IMG_URL + img}\n                                    alt=\"照片\"\n                                    className={'product-details-img'}\n                                />)\n                            })}\n                        </span>\n                    </Item>\n                    <Item>\n                        <span className={'product-details-left'}>商品详情：</span>\n                        <span dangerouslySetInnerHTML={{ __html: detail }}>\n                        </span>\n                    </Item>\n                </List>\n            </Card>\n        );\n    }\n}\n\n","import React from \"react\";\nimport { Upload, Icon, Modal, message } from 'antd';\nimport { PropTypes } from 'prop-types'\n/*\n用于上传图片的组件\n */\nimport { reqDeleteImg } from \"../../api\";\nimport { BASE_IMG_URL } from \"../../utils/constant\";\n\nfunction getBase64(file) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = error => reject(error);\n    });\n}\n\nexport default class PicturesWall extends React.Component {\n    static propTypes = {\n        imgs: PropTypes.array\n    }\n    constructor(props) {\n        super(props);\n\n        //取得已经有的图片列表，进行加工初始化\n        let fileList = []\n        const { imgs } = this.props\n        if (imgs && imgs.length > 0) {\n            fileList = imgs.map((img, index) => ({\n                uid: -index,\n                name: img,\n                status: 'done',\n                url: BASE_IMG_URL + img\n            }))\n        }\n\n        this.state = {\n            previewVisible: false,  //标识是否显示大图预览的Modal\n            previewImage: '',//大图的url\n            fileList\n        };\n    }\n\n    //传递给父组件调用，以收集已上传文件的文件名数组\n    getimgs = () => {\n        return this.state.fileList.map(file => {\n            return file.name\n        })\n    }\n\n    //隐藏Modal\n    handleCancel = () => this.setState({ previewVisible: false });\n\n    handlePreview = async file => {\n        if (!file.url && !file.preview) {\n            file.preview = await getBase64(file.originFileObj);\n        }\n\n        //指定file对应的大图\n        this.setState({\n            previewImage: file.url || file.preview,\n            previewVisible: true,\n        });\n    };\n    /*\n    file：当前操作上传的图片文件（上传、删除）\n    fileList：所有已上传文件对象的数组\n    file并不是fileList数组的最后一个元素，他们是内容相等的两个对象\n     */\n    handleChange = async ({ file, fileList }) => {\n        // console.log(file,file.status,fileList.length)\n\n        //修改上传图片的name和url以符合服务器要求，然后保存到图片数组中\n        if (file.status === 'done') {\n            const result = file.response     //response里有{status:0,data:{name:'xxx.jpg',url:'xxx'}}\n            if (result.status === 0) {\n                const { name, url } = result.data\n                const fileInList = fileList[fileList.length - 1]\n                fileInList.name = name\n                fileInList.url = url\n            }\n\n        } else if (file.status === 'removed') {\n            const result = await reqDeleteImg(file.name)\n            if (result.status === 0) {\n                message.success('删除图片成功')\n            } else {\n                message.error('删除图片失败')\n            }\n        }\n\n        this.setState({ fileList })\n    };\n\n    render() {\n        const { previewVisible, previewImage, fileList } = this.state;\n        const uploadButton = (\n            <div>\n                <Icon type=\"plus\" />\n                <div className=\"ant-upload-text\">Upload</div>\n            </div>\n        );\n        return (\n            <div className=\"clearfix\">\n                <Upload\n                    action=\"/manage/img/upload\" //上传图片的接口地址\n                    accept='image/*'  //只接收的文件格式，其他格式的文件不会显示\n                    name='image' //请求的参数名\n                    listType=\"picture-card\"  // 图片的表现形式\n                    fileList={fileList}  //所有已上传文件对象的数组\n                    onPreview={this.handlePreview}\n                    onChange={this.handleChange}\n                >\n                    {fileList.length >= 4 ? null : uploadButton}     {/*限制可以上传图片的数量*/}\n                </Upload>\n\n                <Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}>\n                    <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\n                </Modal>\n            </div>\n        );\n    }\n}\n/*todo\n    有一个bug，删除图片后依然获取原来的imgs\n */","import React, { Component } from 'react';\nimport { PropTypes } from 'prop-types'\n//编辑商品详情页的富文本编辑器\n\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\n\n//必须要引入样式\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css'\n\n\nexport default class RichTextEditor extends Component {\n    static propTypes = {\n        detail: PropTypes.string\n    }\n\n    constructor(props) {\n        super(props);\n        // debugger\n        // console.log(this.props)\n        const html = this.props.detail;\n        if (html) {// 如果有值, 根据html格式字符串创建一个对应的编辑对象\n            const contentBlock = htmlToDraft(html);\n            if (contentBlock) {\n                const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n                const editorState = EditorState.createWithContent(contentState);\n                this.state = {\n                    editorState,\n                };\n            }\n        } else {// 没有值创建一个没有内容的编辑对象\n            this.state = {\n                editorState: EditorState.createEmpty(),\n            }\n        }\n\n    }\n\n\n    onEditorStateChange = (editorState) => {\n        this.setState({\n            editorState,\n        });\n    };\n    getDetail = () => {\n        //返回输入数据对应的html格式的文本，以供父组件获取\n        return draftToHtml(convertToRaw(this.state.editorState.getCurrentContent()))\n    }\n    uploadImageCallBack = (file) => {\n        return new Promise(\n            (resolve, reject) => {\n                const xhr = new XMLHttpRequest();\n                xhr.open('POST', '/manage/img/upload');\n                const data = new FormData();\n                data.append('image', file);\n                xhr.send(data);\n                xhr.addEventListener('load', () => {\n                    const response = JSON.parse(xhr.responseText);\n                    const url = response.data.url   //得到图片的url\n                    resolve({ data: { link: url } });\n                });\n                xhr.addEventListener('error', () => {\n                    const error = JSON.parse(xhr.responseText);\n                    reject(error);\n                });\n            }\n        );\n    }\n\n    render() {\n        const { editorState } = this.state;\n        return (\n            <div>\n                <Editor\n                    editorState={editorState}\n                    editorStyle={{ border: '1px solid black', minHeight: 200, paddingLeft: 10 }}\n                    onEditorStateChange={this.onEditorStateChange}\n                    toolbar={{\n                        image: { uploadCallback: this.uploadImageCallBack, alt: { present: true, mandatory: true } },\n                    }}\n                />\n                {/*<textarea*/}\n                {/*    disabled*/}\n                {/*    value={draftToHtml(convertToRaw(editorState.getCurrentContent()))}*/}\n                {/*/>*/}\n            </div>\n        );\n    }\n}\n\n","import React, { Component } from 'react';\n/*\n商品增加和修改页\n */\nimport {\n    Card,\n    Input,\n    Form,\n    Cascader,\n    // Upload,\n    Icon,\n    Button, message,\n} from \"antd\";\nimport LinkButton from \"../../components/linkButton\";\nimport { reqCategories, reqAddOrUpdateProduct } from \"../../api\";\nimport PicturesWall from \"./PicturesWall\";\nimport RichTextEditor from \"./RichTextEditor\";\n\nconst Item = Form.Item\nconst { TextArea } = Input;\n\n\nclass ProductAddUpdate extends Component {\n    state = {\n        options: []\n    };\n\n    //1.创建用来保存ref标识的标签对象的容器\n    constructor(props) {\n        super(props);\n\n        this.pictureWall = React.createRef()\n        this.richTextEditor = React.createRef()\n    }\n\n    //回到ProductHome\n    goBackProductHome = () => {\n        this.props.history.goBack()\n    }\n\n    //自定义验证价格方法\n    validatePrice = (rule, value, callback) => {\n        if (value * 1 > 0) {\n            callback()  //成功的回调\n        } else {\n            callback('且必须大于0') //失败的回调\n        }\n    }\n\n\n\n    // 用于加载下一级列表的回调函数\n    loadData = async selectedOptions => {\n        // 得到选择的option对象\n        const targetOption = selectedOptions[0];\n        // 加载图片状态\n        targetOption.loading = true;\n\n        // 根据选中的分类, 请求获取二级分类列表\n        const subCategories = await this.getCategories(targetOption.value)\n        targetOption.loading = false\n\n        if (subCategories && subCategories.length !== 0) {\n            const childOptions = subCategories.map((c) => ({\n                value: c._id,\n                label: c.name,\n                isLeaf: true\n            }))\n            // 关联到当前option上\n            targetOption.children = childOptions\n        } else { //当前选中的没有二级分类\n            targetOption.isLeaf = true\n        }\n        // 更新状态options\n        this.setState({\n            options: [...this.state.options]\n        })\n    };\n\n    //获取一级二级分类列表\n    getCategories = async (parentId) => {\n        const result = await reqCategories(parentId)\n        if (result.status === 0) {\n            //拿到一级分类列表\n            const categories = result.data\n            if (parentId === '0') {\n                this.initOptions(categories)\n            } else {\n                return categories\n            }\n        }\n    }\n    /*\n    初始化Options\n     */\n    initOptions = async (categories) => {\n        // 根据categories生成options\n        const options = categories.map(c => ({\n            value: c._id,\n            label: c.name,\n            isLeaf: false,\n        }))\n\n        // 获取二级状态列表\n        const { isUpdate, product } = this\n        const { pCategoryId } = product\n        if (isUpdate && pCategoryId !== '0') {\n            // 获取对应的二级下拉列表\n            const subCategories = await this.getCategories(pCategoryId)\n            // 生成新的二级下拉列表的options\n            const childOptions = subCategories.map(c => ({\n                value: c._id,\n                label: c.name,\n                isLeaf: true,\n            }))\n            // 找到当前商品对应的一级option对象\n            const targetOption = options.find(option => option.value === pCategoryId)\n            // 关联对应的一级option上\n            targetOption.children = childOptions\n        }\n\n        //更新options的状态\n        this.setState({ options })\n    }\n\n    //提交\n    submit = () => {\n        this.props.form.validateFields(async (error, values) => {\n            if (!error) {\n                //1:收据数据，并生成product对象\n                const { name, desc, price, categoryIds } = values\n                //3.通过ref容器调用子组件的方法\n                const imgs = this.pictureWall.current.getimgs()   //获取照片名字数组\n                const detail = this.richTextEditor.current.getDetail()  //获取富文本编辑返回的HTML字符串\n                let pCategoryId, categoryId\n                if (categoryIds.length === 1) {\n                    pCategoryId = '0'\n                    categoryId = categoryIds[0]\n                } else {\n                    pCategoryId = categoryIds[0]\n                    categoryId = categoryIds[1]\n                }\n                const product = { name, desc, price, imgs, detail, pCategoryId, categoryId }\n                if (this.isUpdate) {\n                    product._id = this.product._id\n                }\n                //2：发送请求增加或更新商品\n                const result = await reqAddOrUpdateProduct(product)\n                //3：根据请求结果操作\n                if (result.status === 0) {\n                    message.success(`${this.isUpdate ? '更新' : '增加'}商品成功`)\n                    this.props.history.goBack()\n                } else {\n                    message.error(`${this.isUpdate ? '更新' : '增加'}商品失败`)\n                }\n            }\n        })\n    }\n\n    UNSAFE_componentWillMount() {\n        // 取ProductHome带过来的product\n        const product = this.props.location.state\n        //保存是否是update的标识,如果product即表示是从修改来的\n        this.isUpdate = !!product\n\n        // 保存带过来的product，如果是增加过来的则为{}\n        this.product = product || {}\n\n    }\n\n    componentDidMount() {\n        this.getCategories('0')\n    }\n\n    render() {\n        const { getFieldDecorator } = this.props.form\n        const { isUpdate, product } = this\n        const categoryIds = []\n        const { categoryId, pCategoryId, imgs, detail } = product\n        // console.log(product)\n        if (pCategoryId === '0') {\n            categoryIds.push(categoryId)\n        } else {\n            // 先显示父父分类，再显示子分类\n            categoryIds.push(pCategoryId)\n            categoryIds.push(categoryId)\n        }\n        const title = (\n            <span>\n                <LinkButton>\n                    <Icon type={'arrow-left'} style={{ marginRight: 10, fontSize: 20 }} onClick={this.goBackProductHome}>\n                    </Icon>\n                </LinkButton>\n                <span>{isUpdate ? '修改商品' : '添加商品'}</span>\n            </span>\n        )\n        // Form Item的布局，一共分为24格\n        const formItemLayout = {\n            labelCol: {\n                xs: { span: 24 },\n                sm: { span: 2 },\n            },\n            wrapperCol: {\n                xs: { span: 24 },\n                sm: { span: 8 },\n            },\n        };\n\n        return (\n            <Card title={title}>\n                <Form {...formItemLayout}>\n                    <Item label={'商品名称'}>\n                        {\n                            getFieldDecorator('name', {\n                                initialValue: product.name,\n                                rules: [\n                                    { required: true, whitespace: true, message: '商品名称必须输入' },\n                                    { min: 2, message: '商品名称最少1位,最多8位!' },\n                                    { max: 8, message: '商品名称最少1位,最多8位!' }\n                                ]\n                            })(<Input placeholder={'请输入商品名称'} />)\n                        }\n                    </Item>\n                    <Item label={'商品描述'}>\n                        {\n                            getFieldDecorator('desc', {\n                                initialValue: product.desc,\n                                rules: [\n                                    { required: true, whitespace: true, message: '商品描述必须输入' },\n                                    { min: 3, message: '商品描述最少6位,最多50位!' },\n                                    { max: 50, message: '商品描述最少6位,最多50位!' }\n                                ]\n                            })(<TextArea placeholder=\"请输入商品描述\" autoSize={{ minRows: 3, maxRows: 5 }} />)\n                        }\n                    </Item>\n                    <Item label={'商品价格'}>\n                        {\n                            getFieldDecorator('price', {\n                                initialValue: product.price,\n                                rules: [\n                                    { required: true, message: '价格必须输入' },\n                                    { validator: this.validatePrice },// 自定义验证规则\n                                ]\n                            })(<Input placeholder={'请输入商品价格，类型为数值'} type='number' addonAfter=\"元\" />)\n                        }\n                    </Item>\n                    <Item label={'商品分类'}>\n                        {\n                            getFieldDecorator('categoryIds', {\n                                initialValue: categoryIds,\n                                rules: [\n                                    { required: true, message: '必须指定商品分类' },\n                                ]\n                            })(\n                                <Cascader\n                                    placeholder='请指定商品分类'\n                                    options={this.state.options}  //需要显示的列表数据数组\n                                    loadData={this.loadData} //当选择某个列表项, 加载下一级列表的监听回调\n                                />\n                            )\n                        }\n                    </Item>\n                    <Item label={'商品图片'}>\n                        {/*2.交给组价一个ref容器，会自动将组件的实例塞到容器里*/}\n                        {/*把product的imgs 交给pictureWall组件*/}\n                        <PicturesWall ref={this.pictureWall} imgs={imgs} />\n                    </Item>\n                    {/* 单独设置单个Item的样式\n                        labelCol: {\n                            xs: { span: 24 },\n                            sm: { span: 2 },\n                        },\n                        wrapperCol: {\n                            xs: { span: 24 },\n                            sm: { span: 8 },\n                        },\n                     */}\n                    <Item\n                        label={'商品详情'}\n                        labelCol={{ xs: { span: 24 }, sm: { span: 2 } }}\n                        wrapperCol={{ xs: { span: 24 }, sm: { span: 20 } }}\n                    >\n                        <RichTextEditor ref={this.richTextEditor} detail={detail}>\n                        </RichTextEditor>\n                    </Item>\n                    <Item >\n                        <Button type={'primary'} onClick={this.submit}>\n                            提交\n                        </Button>\n                    </Item>\n                </Form>\n            </Card>\n        );\n    }\n}\nexport default Form.create()(ProductAddUpdate)\n\n/*\n子组件调用父组件的方法：将父组件的方法以函数属性传递给子组件，子组件就可以调用\n父组件调用子组件的方法：在父组件中通过ref得到子组件标签对象（也就是组件对象），调用其方法\n */","import React, { Component } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom'\n\n/*\n商品管理路由\n */\nimport ProductHome from \"./ProductHome\";\nimport ProductDetails from \"./ProductDetails\";\nimport ProductAddUpdate from \"./ProductAddUpdate\";\nimport './index.less'\n\nexport default class Product extends Component {\n    render() {\n        return (\n            <Switch>\n                <Route path={'/product'} component={ProductHome} exact />\n                <Route path={'/product/details'} component={ProductDetails} />\n                <Route path={'/product/addUpdate'} component={ProductAddUpdate} />\n                <Redirect to={'/product'} />\n            </Switch>\n        );\n    }\n}\n\n","import React, { Component } from 'react';\nimport { Form, Input } from \"antd\";\nimport PropTypes from 'prop-types'\n/*\n添加分类的组件\n */\n\n\nconst Item = Form.Item\n\n\nclass AddForm extends Component {\n    static propTypes = {\n        setForm: PropTypes.func.isRequired\n    }\n\n    // 传递from对象给父组件\n    UNSAFE_componentWillMount() {\n        this.props.setForm(this.props.form)\n    }\n\n    render() {\n        const { getFieldDecorator } = this.props.form\n        // Form Item的布局，一共分为24格\n        const formItemLayout = {\n            labelCol: {\n                xs: { span: 24 },\n                sm: { span: 4 },\n            },\n            wrapperCol: {\n                xs: { span: 24 },\n                sm: { span: 18 },\n            },\n        };\n        return (\n            <Form {...formItemLayout}>\n                <Item label={'角色名称'}>\n                    {getFieldDecorator('roleName', {// 配置对象: 属性名是特定的一些名称\n                        initialValue: '',\n                        rules: [\n                            { required: true, whitespace: true, message: '角色名称不能为空!' },\n                            { min: 2, message: '角色名称最少1位,最多8位!' },\n                            { max: 8, message: '角色名称最少1位,最多8位!' },\n                        ]\n                    })(\n                        <Input placeholder={'请输入角色名称'}>\n                        </Input>\n                    )}\n                </Item>\n            </Form>\n        );\n    }\n}\nexport default Form.create()(AddForm)\n","import React, { Component } from 'react';\nimport Proptypes from 'prop-types'\n/*\n设置角色权限\n */\nimport {\n    Form,\n    Input,\n    Tree\n} from \"antd\";\nimport menuList from \"../../config/manuConfig\";\n\nconst Item = Form.Item\nconst { TreeNode } = Tree;\n\nexport default class AuthForm extends Component {\n    static propTypes = {\n        role: Proptypes.object\n    }\n\n    constructor(props) {\n        super(props)\n\n        // 根据传入角色的menus生成初始状态\n        const { menus } = this.props.role\n        this.state = {\n            checkedKeys: menus\n        }\n    }\n\n    //为父组件获取menu\n    getMenu = () => this.state.checkedKeys\n\n    //动态生成树状图\n    getTreeNodes = (menuList) => {\n        return menuList.reduce((pre, item) => {\n            pre.push(\n                <TreeNode title={item.title} key={item.key}>\n                    {item.children ? this.getTreeNodes(item.children) : null}\n                </TreeNode>\n            )\n            // 必须return\n            return pre\n        }, [])\n    }\n    //选择的回调\n    onCheck = checkedKeys => {\n        this.setState({ checkedKeys });\n    };\n\n    /*\n    根据新传入的role来更新checkedKeys的状态\n    当组价接收到新的属性时自动调用\n     */\n    UNSAFE_componentWillMount() {\n        // 得到tree列表\n        this.treeNodes = this.getTreeNodes(menuList)\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n        // console.log(nextProps.role)\n        const menus = nextProps.role.menus\n        this.setState({ checkedKeys: menus })\n    }\n\n    render() {\n        // Form Item的布局，一共分为24格\n        const { role } = this.props\n        const { checkedKeys } = this.state\n        const formItemLayout = {\n            labelCol: {\n                xs: { span: 24 },\n                sm: { span: 4 },\n            },\n            wrapperCol: {\n                xs: { span: 24 },\n                sm: { span: 18 },\n            },\n        };\n        return (\n            <div>\n                <Item label={'角色名称'} {...formItemLayout}>\n                    <Input value={role.name} disabled={true} />\n                </Item>\n                <Tree\n                    checkable\n                    defaultExpandAll={true}\n                    checkedKeys={checkedKeys}\n                    onCheck={this.onCheck}\n                >\n                    <TreeNode title=\"平台权限\" key=\"all\">\n                        {this.treeNodes}\n                    </TreeNode>\n                </Tree>\n            </div>\n        );\n    }\n}\n\n","import React, { Component } from 'react';\n/*\n角色管理路由\n */\nimport {\n    Card,\n    Button,\n    Table, Modal, message\n} from \"antd\";\n\nimport { connect } from \"react-redux\";\n\n\nimport { PAGE_SIZE } from \"../../utils/constant\";\nimport { reqRoles, reqAddRole, reqUpdateRole } from \"../../api\";\nimport AddForm from \"./AddForm\";\nimport AuthForm from \"./AuthForm\";\nimport { formatDateUtils } from \"../../utils/formatDateUtils\"\nimport { logout } from \"../../redux/actions\";\n\nclass Role extends Component {\n\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            roles: [], //所有角色\n            role: {}, //当前选择行的角色对象\n            showAddStatus: false,//显示创建角色的状态\n            showAuthStatus: false //显示设置角色权限的状态\n        }\n        this.authName = React.createRef()\n    }\n\n    //获取所有用户列表，前台分页展示\n    getRoles = async () => {\n        const result = await reqRoles()\n        if (result.status === 0) {\n            const roles = result.data\n            this.setState({ roles })\n        }\n    }\n\n    // 初始化table所有列的数组\n    initColumns = () => {\n        this.columns = [\n            {\n                title: '角色名称',\n                dataIndex: 'name'\n            },\n            {\n                title: '创建时间',\n                dataIndex: 'create_time',\n                render: formatDateUtils\n            },\n            {\n                title: '授权时间',\n                dataIndex: 'auth_time',\n                render: formatDateUtils\n            },\n            {\n                title: '授权人',\n                dataIndex: 'auth_name'\n            },\n        ];\n    }\n    // 设置行属性的回调\n    onRow = (role) => {\n        return {\n            onClick: event => {// 点击行,\n                this.setState({ role })\n            },\n        };\n    }\n    //添加角色\n    addRole = () => {\n        //通过表单验证\n        this.form.validateFields(async (error, value) => {\n            // 验证用户名是否已存在（前台）\n            if (!this.state.roles.find((role) => role.name === value.roleName)) {\n                //拿到输入的值\n                const { roleName } = value\n                if (!error) {\n                    // 发请求增加角色\n                    const result = await reqAddRole(roleName)\n                    if (result.status === 0) {\n                        message.success('添加角色成功')\n                        const newRole = result.data\n                        // 新角色添加到角色列表中显示\n                        // this.setState({roles:[...this.state.roles,newRole]})\n                        //函数写法\n                        this.setState((state) => ({\n                            // 新角色添加到角色列表中显示\n                            roles: [...state.roles, newRole],\n                            // 隐藏Modal\n                            showAddStatus: false\n                        }))\n                    } else {\n                        message.error('添加角色失败')\n                    }\n                }\n                this.form.resetFields()\n            } else {\n                message.error(`${value.name}已存在！请另外起一个角色名`)\n            }\n\n        })\n    }\n\n    //设置、更新角色权限\n    updateRole = async () => {\n        // 隐藏Modal\n        this.setState({\n            showAuthStatus: false\n        })\n        const { role } = this.state\n        const menus = this.authName.current.getMenu()\n        // console.log( '接收到的',menus)\n        role.menus = menus\n        role.auth_name = this.props.user.username\n        role.auth_time = Date.now()\n        // debugger\n        const result = await reqUpdateRole(role)\n        if (result.status === 0) {\n            this.setState({ roles: [...this.state.roles] })\n            //如果是更新自己的权限，强制退出，清理内存，并跳转到登陆页面\n            if (role._id === this.props.user.role_id) {\n                this.props.logout()\n            }\n            message.success('更新角色成功')\n        } else {\n            message.error('更新失败')\n        }\n\n    }\n\n    // 为第一次render做数据准备\n    UNSAFE_componentWillMount() {\n        this.initColumns()\n    }\n\n    componentDidMount() {\n        this.getRoles()\n    }\n\n    render() {\n        const { roles, role, showAddStatus, showAuthStatus } = this.state\n        const title = (\n            <span>\n                <Button type={'primary'} style={{ marginRight: 20 }} onClick={() => { this.setState({ showAddStatus: true }) }}>创建角色</Button>\n                <Button type={'primary'} disabled={!role._id} onClick={() => { this.setState({ showAuthStatus: true }) }}>设置角色权限</Button>\n            </span>\n        )\n\n        return (\n            <Card title={title}>\n                <Table\n                    // 添加边框\n                    bordered={true}\n                    // 给每一行添加一个key\n                    rowKey={'_id'}\n                    dataSource={roles}\n                    columns={this.columns}\n                    //配置分页参数，和是否显示快速跳转页面\n                    pagination={{ defaultPageSize: PAGE_SIZE }}\n                    //侧边选择项\n                    rowSelection={{\n                        // 隐藏侧边全选按钮\n                        // hideDefaultSelections: true,\n                        //checkbox：多选，radio：单选\n                        type: 'radio',\n                        //点击行就选择\n                        selectedRowKeys: [role._id],\n                        onSelect: (role) => { // 选择某个radio时回调\n                            this.setState({\n                                role\n                            })\n                        }\n                    }}\n                    //点击行的操作\n                    onRow={this.onRow}\n\n                />\n                <Modal\n                    title=\"添加角色\"\n                    visible={showAddStatus}\n                    onOk={this.addRole}\n                    onCancel={() => {\n                        this.setState({ showAddStatus: false })\n                    }}\n                >\n                    <AddForm\n                        setForm={(form) => this.form = form}\n                    />\n                </Modal>\n                <Modal\n                    title=\"设置角色权限\"\n                    visible={showAuthStatus}\n                    onOk={this.updateRole}\n                    onCancel={() => {\n                        this.setState({ showAuthStatus: false })\n                    }}\n                >\n                    <AuthForm\n                        role={role}\n                        ref={this.authName}\n                    />\n                </Modal>\n            </Card>\n        );\n    }\n}\n\nexport default connect(\n    state => ({ user: state.user }),\n    { logout }\n)(Role)\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types'\nimport {\n    Form,\n    Input,\n    Select\n} from \"antd\";\n/*\n添加\\修改用户的组件\n */\n\nconst Option = Select.Option\nconst Item = Form.Item\n\n\nclass UserForm extends PureComponent {\n    static propTypes = {\n        roles: PropTypes.array.isRequired,\n        getUserForm: PropTypes.func.isRequired,\n        user: PropTypes.object\n    }\n\n    // 自定义手机号验证规则\n    validatePhoneNumber = (rule, value, callback) => {\n        if (!value) callback(\"手机号不能为空!\")\n        if (value.length !== 11) callback(\"手机号为1开头的11位数字\")\n        if (!/^[1][0-9]{10}$/.test(value)) callback(\"手机号为1开头的11位数字\")\n        callback()\n    }\n    // 自定义密码验证规则\n    validatePWD = (rule, value, callback) => {\n        if (!value) callback(\"密码不能为空!\")\n        if (value.length < 4) callback(\"密码是最少4位,最多12位的字母数字和下划线\")\n        if (value.length > 12) callback(\"密码是最少4位,最多12位的字母数字和下划线\")\n        if (!/^[a-zA-Z0-9_]+$/.test(value)) callback(\"密码只能是字母数字和下划线！\")\n        callback()\n    }\n    // 自定义邮箱验证规则\n    validateEmail = (rule, value, callback) => {\n        if (!value) callback(\"邮箱不能为空!\")\n        if (!/^\\w{3,}(\\.\\w+)*@[A-z0-9]+(\\.[A-z]{2,5}){1,2}$/.test(value)) callback(\"请输入正确的邮箱格式，例如：xxx@xxx.xxx\")\n        callback()\n    }\n\n    // 传递from对象给父组件\n    UNSAFE_componentWillMount() {\n        this.props.getUserForm(this.props.form)\n    }\n\n    render() {\n        const { getFieldDecorator } = this.props.form\n        const { roles, user } = this.props\n        // console.log(roles,user)\n        // Form Item的布局，一共分为24格\n        const formItemLayout = {\n            labelCol: {\n                xs: { span: 24 },\n                sm: { span: 4 },\n            },\n            wrapperCol: {\n                xs: { span: 24 },\n                sm: { span: 18 },\n            },\n        };\n        return (\n            <Form {...formItemLayout}>\n                <Item label={'用户名'}>\n                    {getFieldDecorator('username', {// \n                        initialValue: user.username,\n                        rules: [\n                            { required: true, whitespace: true, message: '用户不能为空!' },\n                            { min: 4, message: '用户名最少4位,最多12位!' },\n                            { max: 12, message: '用户名最少4位,最多12位!' },\n                            { pattern: /^[a-zA-Z0-9_]+$/, message: '用户名只能是字母数字和下划线！' }\n                        ]\n                    })(\n                        <Input placeholder={'请输入用户名'}>\n                        </Input>\n                    )}\n                </Item>\n                {\n                    //修改用户时不用更改密码\n                    user._id ? null :\n                        <Item label={'密码'}>\n                            {getFieldDecorator('password', {//\n                                initialValue: user.password,\n                                rules: [\n                                    { required: true, whitespace: true, message: '密码不能为空!' },\n                                    { validator: this.validatePWD },\n                                ]\n                            })(\n                                <Input placeholder={'请输入密码'} type={'password'}>\n                                </Input>\n                            )}\n                        </Item>\n                }\n                <Item label={'手机号'}>\n                    {getFieldDecorator('phone', {\n                        initialValue: user.phone,\n                        rules: [\n                            { required: true, whitespace: true, message: '手机号为11位数字' },\n                            { validator: this.validatePhoneNumber },// 自定义验证规则\n                        ]\n                    })(\n                        <Input placeholder={'请输入手机号'} type={'number'} >\n                        </Input>\n                    )}\n                </Item>\n                <Item label={'邮箱'}>\n                    {getFieldDecorator('email', {//\n                        initialValue: user.email,\n                        rules: [\n                            { required: true, whitespace: true, message: '邮箱不能为空!' },\n                            { validator: this.validateEmail },// 自定义验证规则\n                        ]\n                    })(\n                        <Input placeholder={'请输入邮箱'}>\n                        </Input>\n                    )}\n                </Item>\n                <Item label={'角色'}>\n                    {getFieldDecorator('role_id', {\n                        initialValue: user.role_id,\n                        rules: [\n                            { required: true, whitespace: true, message: '请选择角色' },\n                        ]\n                    })(\n                        <Select >\n                            {\n                                roles.map(role => (<Option value={role._id} key={role._id}>{role.name}</Option>))\n                            }\n                        </Select>\n                    )}\n                </Item>\n            </Form>\n        );\n    }\n}\nexport default Form.create()(UserForm)\n\n","import React, { Component } from 'react';\n\n/*\n用户管理管理路由\n */\n\nimport {\n    Card,\n    Button,\n    Modal,\n    Table,\n    message\n} from \"antd\";\n\nimport UserForm from './UserForm'\nimport { formatDateUtils } from '../../utils/formatDateUtils'\nimport LinkButton from \"../../components/linkButton\";\nimport { PAGE_SIZE } from \"../../utils/constant\";\nimport { reqUsers, reqDeleteUser, reqAddUpdateUser } from \"../../api\";\n\nexport default class User extends Component {\n    state = {\n        showStatus: false,\n        users: [],\n        roles: []\n    }\n\n    // 增加修改用户\n    addOrUpdateUser = () => {\n        this.setState({ showStatus: false })\n        this.from.validateFields(async (error, value) => {\n            if (!error) {\n                // 1.收集数据\n                let user = value\n                // 如果是更新，给user添加_id属性\n                if (this.user) {\n                    user._id = this.user._id\n                }\n                const result = await reqAddUpdateUser(user)\n                if (result.status === 0) {\n                    message.success(`${this.user ? '修改' : '添加'}用户成功`)\n                    this.getUsers()\n                    this.from.resetFields()\n                } else {\n                    message.error(`${this.user ? '修改' : '添加'}用户失败`)\n                }\n            }\n        })\n    }\n\n    // 删除用户\n    deleteUser = (user) => {\n        Modal.confirm({\n            title: `确认删除${user.username}吗？`,\n            onOk: async () => {\n                const result = await reqDeleteUser(user._id)\n                if (result.status === 0) {\n                    message.success('删除成功')\n                    this.getUsers()\n                } else {\n                    message.error('删除失败')\n                }\n            }\n        })\n    }\n\n    //显示修改用户\n    showUpdateUser = (user) => {\n        this.user = user\n        this.setState({ showStatus: true })\n    }\n\n    //显示创建用户\n    showAddUser = () => {\n        // 先把user重置为null，否则会影响创建用户\n        this.user = null\n        this.setState({ showStatus: true })\n    }\n\n    // 获取用户列表\n    getUsers = async () => {\n        const result = await reqUsers()\n        if (result.status === 0) {\n            const { users, roles } = result.data\n            this.initRolesName(roles)\n            this.setState({ users, roles })\n        }\n    }\n\n    // 收集各用户名的角色名对象\n    initRolesName = (roles) => {\n        const rolesName = roles.reduce((pre, role) => {\n            pre[role._id] = role.name\n            return pre\n        }, {})\n        this.rolesName = rolesName\n    }\n    // 初始化列\n    initColumns = () => {\n        this.columns = [\n            {\n                title: '用户名',\n                dataIndex: 'username'\n            },\n            {\n                title: '邮箱',\n                dataIndex: 'email'\n            },\n            {\n                title: '电话',\n                dataIndex: 'phone'\n            },\n            {\n                title: '注册时间',\n                dataIndex: 'create_time',\n                render: formatDateUtils\n            },\n            {\n                title: '所属角色',\n                dataIndex: 'role_id',\n                // 找到对象的角色名称\n                // render: (role_id) => this.state.roles.find(role => role._id === role_id).name\n                // 优化，减少查询次数,先把角色收集起来，键是' role_id', 值是对应的角色名\n                render: (role_id) => this.rolesName[role_id]\n            },\n\n\n            {\n                title: '操作',\n                render: (user) => (\n                    <span>\n                        <LinkButton onClick={() => { this.showUpdateUser(user) }}>修改</LinkButton>\n                        <LinkButton onClick={() => { this.deleteUser(user) }}>删除</LinkButton>\n                    </span>\n                )\n            },\n        ]\n    }\n\n    UNSAFE_componentWillMount() {\n        this.initColumns()\n    }\n\n    componentDidMount() {\n        this.getUsers()\n    }\n\n    render() {\n        const { showStatus, users, roles } = this.state\n        const user = this.user || {}\n        const title = (\n            <span>\n                <Button type={'primary'} onClick={this.showAddUser}>\n                    创建用户\n                </Button>\n            </span>\n        )\n        return (\n            <Card title={title}>\n                <Table\n                    // 添加边框\n                    bordered={true}\n                    // 给每一行添加一个key\n                    rowKey={'_id'}\n                    dataSource={users}\n                    columns={this.columns}\n                    pagination={{ defaultPageSize: PAGE_SIZE }}\n                >\n\n                </Table>\n                <Modal\n                    title={user.username ? '修改用户：' + user.username : '添加用户'}\n                    visible={showStatus}\n                    onOk={this.addOrUpdateUser}\n                    onCancel={() => {\n                        this.setState({ showStatus: false })\n                        this.form.resetFields()\n                    }}\n                >\n                    <UserForm\n                        getUserForm={form => this.from = form}\n                        roles={roles}\n                        user={user}\n                    />\n                </Modal>\n            </Card>\n        );\n    }\n}\n\n","/*\r\n * @Descripttion: \r\n * @version: \r\n * @@Company: \r\n * @Author: FY01\r\n * @Date: 2022-02-19 10:23:46\r\n * @LastEditors: \r\n * @LastEditTime: 2022-02-19 10:31:37\r\n */\r\nimport React, { Component } from 'react'\r\nimport { Button, Row, Col } from 'antd'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { setHeadTitle } from '../../redux/actions'\r\nimport './not-found.less'\r\n\r\n/*\r\n前台404页面\r\n */\r\nclass NotFound extends Component {\r\n\r\n  goHome = () => {\r\n    this.props.setHeadTitle('首页')\r\n    this.props.history.replace('/home')\r\n  }\r\n\r\n  render() {\r\n    return (\r\n\r\n      <Row className='not-found'>\r\n        <Col span={12} className='left'></Col>\r\n        <Col span={12} className='right'>\r\n          <h1>404</h1>\r\n          <h2>抱歉，你访问的页面不存在</h2>\r\n          <div>\r\n            <Button type='primary' onClick={this.goHome}>\r\n              回到首页\r\n            </Button>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  null,\r\n  { setHeadTitle }\r\n)(NotFound)","import React, { Component } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom'\nimport { Layout } from 'antd';\nimport { connect } from \"react-redux\";\n\nimport Header from \"../../components/header\";\nimport LeftNav from \"../../components/left-nav\";\n\nimport Category from \"../category/Category\";\nimport Bar from \"../charts/Bar\";\nimport Line from \"../charts/Line\";\nimport Pie from \"../charts/Pie\"\nimport Home from \"../home/Home\";\nimport Product from \"../product/Product\";\nimport Role from \"../role/Role\";\nimport User from \"../user/User\";\nimport NotFound from \"../not-found/not-found\";\nimport './admin.less'\n\nconst { Footer, Sider, Content } = Layout;\n\nclass Admin extends Component {\n    render() {\n        const user = this.props.user\n        if (!user || !user._id) {\n            return <Redirect to='/login' />\n        }\n        return (\n            <Layout style={{ minHeight: '100%' }}>\n                <Sider>\n                    <LeftNav></LeftNav>\n                </Sider>\n                <Layout>\n                    <Header></Header>\n                    <Content className={'content'}>\n                        <Switch>\n                            <Redirect exact from='/' to='/home' />\n                            <Route path='/home' component={Home} />\n                            <Route path='/category' component={Category} />\n                            <Route path='/product' component={Product} />\n                            <Route path='/user' component={User} />\n                            <Route path='/role' component={Role} />\n                            <Route path='/charts/bar' component={Bar} />\n                            <Route path='/charts/line' component={Line} />\n                            <Route path='/charts/pie' component={Pie} />\n                            {/* //没有匹配到直接跳转到404页面 */}\n                            <Route component={NotFound} />\n                        </Switch>\n                    </Content>\n                    <Footer style={{ textAlign: \"center\", color: '#ccc' }}>\n                        推荐使用谷歌浏览器，可以获得更佳的页面操作体验\n                    </Footer>\n                </Layout>\n            </Layout>\n        );\n    }\n}\nexport default connect(\n    state => ({ user: state.user }),\n    {}\n)(Admin)\n\n","import React, { Component } from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport { Form, Icon, Input, Button, message } from 'antd';\nimport { connect } from 'react-redux'\n\nimport './login.less'\nimport logo from '../../assets/images/logo.png'\nimport { login } from \"../../redux/actions\";\n\n\nclass Login extends Component {\n    handleSubmit = e => {\n        // 阻止事件的默认行为\n        e.preventDefault();\n        // 对所有表单字段进行检验\n        this.props.form.validateFields(async (err, values) => {\n            // 检验成功\n            if (!err) {\n                // 请求登陆\n                const { username, password } = values\n                this.props.login(username, password)\n\n                //登陆失败的提示\n                const errMsg = this.props.user.errMsg\n                if (errMsg) {\n                    message.error(errMsg)\n                }\n            }\n        });\n    };\n    /*\n  对密码进行自定义验证\n  */\n    validatePWD = (rule, value, callback) => {\n        if (!value) callback(\"密码不能为空!\")\n        if (value.length < 4) callback(\"密码是最少4位,最多12位的字母数字和下划线\")\n        if (value.length > 12) callback(\"密码是最少4位,最多12位的字母数字和下划线\")\n        if (!/^[a-zA-Z0-9_]+$/.test(value)) callback(\"密码只能是字母数字和下划线！\")\n        callback()\n    }\n\n    render() {\n        // 判断是否已登录（redux中是否有user），假如已登录就直接跳转到admin\n        const user = this.props.user\n        if (user && user._id) {\n            return <Redirect to='/home' />\n        }\n\n\n\n        const { getFieldDecorator } = this.props.form;\n        return (\n            <div className=\"login\">\n                <div className=\"login-header\">\n                    <img src={logo} alt=\"logo\" />\n                    <h1>后台管理系统</h1>\n                </div>\n                <section className=\"login-content\">\n                    <h2>登陆系统</h2>\n                    <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                        <Form.Item>\n                            {getFieldDecorator('username', {// 配置对象: 属性名是特定的一些名称\n                                // 声明式验证: 直接使用别人定义好的验证规则进行验证\n                                initialValue: 'admin',// 初始值\n                                rules: [\n                                    { required: true, whitespace: true, message: '用户不能为空!' },\n                                    { min: 4, message: '用户名最少4位,最多12位!' },\n                                    { max: 12, message: '用户名最少4位,最多12位!' },\n                                    { pattern: /^[a-zA-Z0-9_]+$/, message: '用户名只能是字母数字和下划线！' }\n                                ]\n                            })(\n                                <Input\n                                    prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                                    placeholder=\"用户名\"\n                                />,\n                            )}\n                        </Form.Item>\n                        <Form.Item>\n                            {getFieldDecorator('password', {\n                                rules: [\n                                    { validator: this.validatePWD },\n                                ]\n                            })(\n                                <Input\n                                    prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                                    type=\"password\"\n                                    placeholder=\"密码\"\n                                />,\n                            )}\n                        </Form.Item>\n                        <Form.Item>\n                            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n                                Log in\n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </section>\n            </div>\n        );\n    }\n}\n\nconst WrappedLogin = Form.create({ name: 'normal_login' })(Login);\nexport default connect(\n    state => ({ user: state.user }),\n    { login }\n)(WrappedLogin)\n\n\n\n","import React, { Component } from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\n\nimport Admin from \"./pages/admin/admin\";\nimport Login from \"./pages/login/login\";\nexport default class App extends Component {\n\n    render() {\n        return (\n            <BrowserRouter>\n                <Switch>\n                    <Route path='/login' component={Login} />\n                    <Route path='/' component={Admin} />\n                </Switch>\n            </BrowserRouter>\n        );\n    }\n}\n\n","import React from 'react'\nimport ReactDom from 'react-dom'\nimport { Provider } from \"react-redux\";\n\nimport store from './redux/store'\nimport './App.css'\nimport App from './App'\n\n\nReactDom.render((\n    <Provider store={store}>\n        <App />\n    </Provider>\n),\n    document.getElementById('root')\n)"],"sourceRoot":""}